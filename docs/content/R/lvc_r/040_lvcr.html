<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.296">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2022-09-27">
<meta name="description" content="Modifying data, including removing rows, re-coding variables, centering continuous variables, dividing continuous variables, changing the order of variables, reversing the order of variables, combining columns, splitting columns, and partitioning data sets.">

<title>LingMethodsHub - Modifying Data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<link href="../../../content/R/lvc_r/050_lvcr.html" rel="next">
<link href="../../../content/R/lvc_r/030_lvcr.html" rel="prev">
<script src="../../../site_libs/cookie-consent/cookie-consent.js"></script>
<link href="../../../site_libs/cookie-consent/cookie-consent.css" rel="stylesheet">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-ES98D09K0F"></script>

<script type="text/plain" cookie-consent="tracking">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-ES98D09K0F', { 'anonymize_ip': true});
</script>

<script type="text/javascript" charset="UTF-8">
document.addEventListener('DOMContentLoaded', function () {
cookieconsent.run({
  "notice_banner_type":"simple",
  "consent_type":"express",
  "palette":"light",
  "language":"en",
  "page_load_consent_levels":["strictly-necessary"],
  "notice_banner_reject_button_hide":false,
  "preferences_center_close_button_hide":false,
  "website_name":""
  });
});
</script> 
  
<style>html{ scroll-behavior: smooth; }</style>
<script type="application/json" class="js-hypothesis-config">
{
  "theme": "clean",
  "openSidebar": false,
  "showHighlights": "never"
}
</script>
<script async="" src="https://hypothes.is/embed.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../../styles.css">
<meta property="og:title" content="LingMethodsHub - Modifying Data">
<meta property="og:description" content="Modifying data, including removing rows, re-coding variables, centering continuous variables, dividing continuous variables, changing the order of variables, reversing the order of variables, combining columns, splitting columns, and partitioning data sets.">
<meta property="og:site-name" content="LingMethodsHub">
<meta name="twitter:title" content="LingMethodsHub - Modifying Data">
<meta name="twitter:description" content="Modifying data, including removing rows, re-coding variables, centering continuous variables, dividing continuous variables, changing the order of variables, reversing the order of variables, combining columns, splitting columns, and partitioning data sets.">
<meta name="twitter:image" content="https://lingmethodshub.github.io/content/R/lvc_r/assets/logo.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="citation_title" content="Modifying Data">
<meta name="citation_publication_date" content="2022-09-27">
<meta name="citation_cover_date" content="2022-09-27">
<meta name="citation_year" content="2022">
<meta name="citation_online_date" content="2022-09-27">
<meta name="citation_fulltext_html_url" content="https://lingmethodshub.github.io/content/R/lvc_r/040_lvcr.html">
<meta name="citation_doi" content="10.5281/zenodo.7160718">
<meta name="citation_volume" content="Doing LVC with R">
<meta name="citation_language" content="en">
<meta name="citation_journal_title" content="Linguistics Methods Hub">
<meta name="citation_series_title" content="Linguistics Methods Hub">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">LingMethodsHub</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="../../../index.html" rel="" target="" aria-current="page">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../content/index.html" rel="" target="">
 <span class="menu-text">Tutorials</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../content/contributing/index.html" rel="" target="">
 <span class="menu-text">Contributing</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../people/index.html" rel="" target="">
 <span class="menu-text">People</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/LingMethodsHub/LingMethodsHub.github.io" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../../content/R/index.html">R</a></li><li class="breadcrumb-item"><a href="../../../content/R/lvc_r/010_lvcr.html">Getting Started</a></li><li class="breadcrumb-item"><a href="../../../content/R/lvc_r/040_lvcr.html">Modifying Data</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="../../../index.html" class="sidebar-logo-link">
      <img src="../../../assets/logo.svg" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../content/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tutorials</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../content/R/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Doing LVC with R</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../content/R/lvc_r/010_lvcr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Getting Started</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../content/R/lvc_r/020_lvcr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Getting Your Data Into <em>R</em></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../content/R/lvc_r/030_lvcr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Getting to Know Your Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../content/R/lvc_r/040_lvcr.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Modifying Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../content/R/lvc_r/050_lvcr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Doing it all again, but <code>tidy</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../content/R/lvc_r/060_lvcr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Crosstabs: Counts, Proportions, and More</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../content/R/lvc_r/070_lvcr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Proportions for <code>ggplot2</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../content/R/lvc_r/080_lvcr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Conditional Inference Trees</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../content/R/lvc_r/090_lvcr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Random Forests: The Basics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../content/R/lvc_r/110_lvcr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Mixed-Efects Logistic Regression Analysis: Part 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../content/R/lvc_r/112_lvcr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Mixed-Efects Logistic Regression Analysis: Part 2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../content/R/lvc_r/114_lvcr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Mixed-Efects Logistic Regression Analysis: Part 3</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../content/R/lvc_r/116_lvcr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Mixed-Efects Logistic Regression Analysisː Part 4</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
      </ul>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../content/R/vowel-plots-tutorial/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Vowel Plots with <code>ggplot2</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../content/R/tidy-norm/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How to normalize your vowels using the tidyverse</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../content/R/animated_vowel_plots_tutorial/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Visualising Vowel Space Change with GAMMs</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../content/R/getVOT-tutorial/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Predicting VOT-related landmarks in R with <code>getVOT</code></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../content/python/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Python</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../content/python/vowel-plotting-py/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Vowel plotting in Python</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../content/python/speaker-diarization-for-linguistics/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Speaker Diarization for Linguistics</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Praat</span></span>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../content/tools/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tools</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../content/tools/mfa/mfa-tutorial/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Montreal Forced Aligner</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../content/tools/autovot/autovot-tutorial/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">AutoVOT</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../content/cli/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Command Line Interfaces</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../content/cli/bash-shell-basics/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bash Shell Basics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../content/cli/keyboarding/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Keyboarding</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../content/windows/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Windows</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../content/windows/wsl/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Windows Subsystem for Linux</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../content/windows/wsl/00_installing_wsl.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Installation</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#removing-rows" id="toc-removing-rows" class="nav-link active" data-scroll-target="#removing-rows">Removing Rows</a></li>
  <li><a href="#re-coding-variables" id="toc-re-coding-variables" class="nav-link" data-scroll-target="#re-coding-variables">Re-coding Variables</a></li>
  <li><a href="#centering-continuous-variables" id="toc-centering-continuous-variables" class="nav-link" data-scroll-target="#centering-continuous-variables">Centering Continuous Variables</a></li>
  <li><a href="#dividing-a-continuous-variable" id="toc-dividing-a-continuous-variable" class="nav-link" data-scroll-target="#dividing-a-continuous-variable">Dividing a Continuous Variable</a></li>
  <li><a href="#changing-the-order-of-levels" id="toc-changing-the-order-of-levels" class="nav-link" data-scroll-target="#changing-the-order-of-levels">Changing the Order of Levels</a></li>
  <li><a href="#reversing-the-order-of-levels" id="toc-reversing-the-order-of-levels" class="nav-link" data-scroll-target="#reversing-the-order-of-levels">Reversing the Order of Levels</a></li>
  <li><a href="#combining-columns" id="toc-combining-columns" class="nav-link" data-scroll-target="#combining-columns">Combining Columns</a></li>
  <li><a href="#splitting-columns" id="toc-splitting-columns" class="nav-link" data-scroll-target="#splitting-columns">Splitting Columns</a></li>
  <li><a href="#partitioning-data-frames" id="toc-partitioning-data-frames" class="nav-link" data-scroll-target="#partitioning-data-frames">Partitioning Data Frames</a></li>
  <li><a href="#interim-summary" id="toc-interim-summary" class="nav-link" data-scroll-target="#interim-summary">Interim Summary</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="040_lvcr.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Modifying Data</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>

<div>
  <div class="description">
    Modifying data, including removing rows, re-coding variables, centering continuous variables, dividing continuous variables, changing the order of variables, reversing the order of variables, combining columns, splitting columns, and partitioning data sets.
  </div>
</div>

<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Matt Hunt Gardner <a href="https://orcid.org/0000-0002-1878-4232" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
  </div>
    <div class="quarto-title-meta-contents">
        <p class="affiliation">
            University of Oxford
          </p>
      </div>
    </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 27, 2022</p>
    </div>
  </div>
  
    
    <div>
    <div class="quarto-title-meta-heading">Doi</div>
    <div class="quarto-title-meta-contents">
      <p class="doi">
        <a href="https://doi.org/10.5281/zenodo.7160718">10.5281/zenodo.7160718</a>
      </p>
    </div>
  </div>
  </div>
  

</header>

<p>If you followed the previous section you now have an object in <em>R</em> called <code>td</code> in which all character columns are converted to factors. If not, you can load it now with either of the following codes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>td <span class="ot">&lt;-</span> <span class="fu">read.delim</span>(<span class="st">"https://www.dropbox.com/s/jxlfuogea3lx2pu/deletiondata.txt?dl=1"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>td <span class="ot">&lt;-</span> <span class="fu">read.delim</span>(<span class="st">"Data/deletiondata.txt"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Re-class character columns as factors.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Dep.Var <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Dep.Var)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Stress <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Stress)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Category <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Category)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Morph.Type <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Morph.Type)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Before <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Before)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>After <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>After)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Speaker <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Speaker)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Sex <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Sex)</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Education <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Education)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Job <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Job)</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Phoneme.Dep.Var <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Phoneme.Dep.Var)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Deleting tokens, re-coding tokens, combining factor groups, etc. is, in my opinion, easier to do in <em>Excel</em>. But, if you want to do this in <em>R</em>, or you only want to perform the modification for a specific analysis or graph, you may find the following functions useful.</p>
<section id="removing-rows" class="level2">
<h2 class="anchored" data-anchor-id="removing-rows">Removing Rows</h2>
<p>The (t, d) deletion data includes tokens in which the previous phoneme is a vowel. Many analyses of (t, d) deletion exclude this context. Here is how to remove these contexts from your data frame.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>td <span class="ot">&lt;-</span> td[td<span class="sc">$</span>Before <span class="sc">!=</span> <span class="st">"Vowel"</span>, ]</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(td)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Dep.Var           Stress         Category        Morph.Type 
 Deletion:386   Stressed  :1047   Function:  57   Mono     :762  
 Realized:803   Unstressed: 142   Lexical :1132   Past     :311  
                                                  Semi-Weak:116  
                                                                 
                                                                 
                                                                 
                                                                 
             Before          After        Speaker         YOB       Sex    
 Liquid         :269   Consonant:215   INGM84 : 57   Min.   :1915   F:659  
 Nasal          :209   H        :157   MARM92 : 53   1st Qu.:1952   M:530  
 Other Fricative:130   Pause    :558   GARF87 : 52   Median :1984          
 S              :332   Vowel    :259   HUNF22 : 32   Mean   :1969          
 Stop           :249                   DONF15 : 28   3rd Qu.:1991          
 Vowel          :  0                   GARF37 : 28   Max.   :1999          
                                       (Other):939                         
        Education        Job          Phoneme.Dep.Var
 Educated    :496   Blue   :130   t--T        :352   
 Not Educated:317   Service:468   t--Deletion :296   
 Student     :376   Student:376   t--Fricative:131   
                    White  :215   d--Deletion : 90   
                                  d--T        : 73   
                                  d--D        : 46   
                                  (Other)     :201   </code></pre>
</div>
</div>
<p>The first line of code creates a new object called <code>td</code>. The <code>&lt;-</code> operator means you’re telling <em>R</em> that this new <code>td</code> is the same as the old <code>td</code>, but filtered according to some specific condition. You could also use the <code>&lt;-</code> operator to create a new <code>td</code> with a different name — e.g., <code>td.new &lt;- td[td\$Before != "Vowel",]}</code> — thus giving you two data frames (<code>td</code> and <code>td.new</code>) to work with.</p>
<p>Throughout <em>R</em>, square brackets <code>[ ]</code> are used for specifying filtering conditions. The first line of code therefore says make new <code>td</code> the same as old <code>td</code>, but only where the value in the <code>Before</code> column of old <code>td</code> (indicated by <code>td$Before</code>) does not equal <code>"Vowel"</code>. <code>!=</code> is the standard operator meaning <em>does not equal</em>. The comma after <code>"Vowel"</code> is important. If you are filtering a data frame, as you are here, <em>R</em> needs to know where to look for the values you want to keep or throw out. It follows this format: <code>data frame[rows,columns]</code>. So the comma in the above indicates that the filtering condition relates to values found while searching row by row. It selects any row in which the value in the <code>Before</code> column does not equal <code>"Vowel"</code>. The quotation marks around <code>"Vowel"</code> are also important because the values in the <code>Before</code> column are all strings of characters, which (you’ll remember from above), are always enclosed in quotation marks.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Before <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Before)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>An additional line of code is needed for resetting the data structure. The new <code>td</code> inherits the data structure from the old <code>td</code>. This means <em>R</em> thinks the new <code>td</code> still has a level in the column <code>Before</code> called <code>"Vowel"</code> — even though there are zero tokens now in the column with this value. If you run <code>summary(td)</code> after the first code above you’ll see that <em>R</em> still lists <code>"Vowel"</code> as a possible level of <code>Before</code>, but with zero instances. The additional line of code tells <em>R</em> to make a new column <code>Before</code> in the data frame <code>td</code> (this will replace the old <code>Before</code> column) in which the possible factors (i.e., values) in that column are those that actually exist in the new <code>Before</code> column in <code>td</code>. Run <code>summary()</code> or <code>str()</code> now and you’ll see that the empty <code>"Vowel"</code> level is gone.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(td)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Dep.Var           Stress         Category        Morph.Type 
 Deletion:386   Stressed  :1047   Function:  57   Mono     :762  
 Realized:803   Unstressed: 142   Lexical :1132   Past     :311  
                                                  Semi-Weak:116  
                                                                 
                                                                 
                                                                 
                                                                 
             Before          After        Speaker         YOB       Sex    
 Liquid         :269   Consonant:215   INGM84 : 57   Min.   :1915   F:659  
 Nasal          :209   H        :157   MARM92 : 53   1st Qu.:1952   M:530  
 Other Fricative:130   Pause    :558   GARF87 : 52   Median :1984          
 S              :332   Vowel    :259   HUNF22 : 32   Mean   :1969          
 Stop           :249                   DONF15 : 28   3rd Qu.:1991          
                                       GARF37 : 28   Max.   :1999          
                                       (Other):939                         
        Education        Job          Phoneme.Dep.Var
 Educated    :496   Blue   :130   t--T        :352   
 Not Educated:317   Service:468   t--Deletion :296   
 Student     :376   Student:376   t--Fricative:131   
                    White  :215   d--Deletion : 90   
                                  d--T        : 73   
                                  d--D        : 46   
                                  (Other)     :201   </code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(td)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   1189 obs. of  12 variables:
 $ Dep.Var        : Factor w/ 2 levels "Deletion","Realized": 2 1 1 1 2 1 1 1 1 1 ...
 $ Stress         : Factor w/ 2 levels "Stressed","Unstressed": 1 1 1 1 1 1 1 1 1 1 ...
 $ Category       : Factor w/ 2 levels "Function","Lexical": 2 2 2 2 2 2 2 2 2 2 ...
 $ Morph.Type     : Factor w/ 3 levels "Mono","Past",..: 1 1 1 1 1 1 1 1 1 1 ...
 $ Before         : Factor w/ 5 levels "Liquid","Nasal",..: 5 5 5 5 5 5 5 5 5 5 ...
 $ After          : Factor w/ 4 levels "Consonant","H",..: 1 1 1 1 1 1 1 1 1 1 ...
 $ Speaker        : Factor w/ 66 levels "ARSM91","BEAM91",..: 3 5 5 6 13 14 15 23 29 33 ...
 $ YOB            : int  1965 1955 1955 1952 1953 1958 1946 1942 1945 1949 ...
 $ Sex            : Factor w/ 2 levels "F","M": 1 1 1 1 2 2 1 2 2 1 ...
 $ Education      : Factor w/ 3 levels "Educated","Not Educated",..: 1 1 1 1 1 2 1 2 2 1 ...
 $ Job            : Factor w/ 4 levels "Blue","Service",..: 4 4 4 2 2 2 2 1 1 2 ...
 $ Phoneme.Dep.Var: Factor w/ 18 levels "d--Affricate",..: 18 12 12 12 18 12 12 12 12 12 ...</code></pre>
</div>
</div>
<p>The following code does exactly the same thing as the previous code, but instead of filtering out <code>"Vowel"</code>, it specifies keeping all the other levels. Here <code>==</code> is the standard operator meaning <em>equals and only equals</em> and <code>|</code> (called <em>pipe</em> or <em>bar</em>) is the operator meaning <em>or</em>. Again, note the very important comma following the last column condition.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>td <span class="ot">&lt;-</span> td[td<span class="sc">$</span>Before <span class="sc">==</span> <span class="st">"Liquid"</span> <span class="sc">|</span> td<span class="sc">$</span>Before <span class="sc">==</span> <span class="st">"Nasal"</span> <span class="sc">|</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    td<span class="sc">$</span>Before <span class="sc">==</span> <span class="st">"Other Fricative"</span> <span class="sc">|</span> td<span class="sc">$</span>Before <span class="sc">==</span> <span class="st">"S"</span> <span class="sc">|</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    td<span class="sc">$</span>Before <span class="sc">==</span> <span class="st">"Stop"</span>, ]</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Before <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Before)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>As you did previously, you must run the second line of code to get rid of the empty <code>"Vowel"</code> level.</p>
</section>
<section id="re-coding-variables" class="level2">
<h2 class="anchored" data-anchor-id="re-coding-variables">Re-coding Variables</h2>
<p>While it is possible to do <em>ad-hoc</em> re-codes in <em>R</em>, you must keep in mind that these re-codes will only exist in your <em>R</em> data frame, not in your saved tab-delimited-text file. Personally, I think it’s both easier and more useful to use Microsoft <em>Excel</em> to create new columns in your tab-delimited-text file for every re-code or configuration of factors in a factor group (i.e., levels in a column) that you might need. That being said, there are definitely situations where <em>ad-hoc</em> re-codes may be preferable.</p>
<p>If you want to change anything in your data frame you can generate an editable data frame in a popup window with the following function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fix</span>(td)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>I don’t recommend using this method. Like <code>file.choose()</code> and <code>choose.files()</code>, it introduces non-replicability because the changes you make using <code>fix()</code> are not recorded in your script file and therefore cannot be automatically replicated. A better practice for re-coding while maintaining replicability is to specify the cells in a column that include the specific values you want to change, and then to reassign a new value to those cells:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>After[td<span class="sc">$</span>After <span class="sc">==</span> <span class="st">"H"</span>] <span class="ot">&lt;-</span> <span class="st">"Consonant"</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>After <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>After)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The code above uses the <code>&lt;-</code> operator to say that any cells in the column <code>After</code> that contain the value <code>"H"</code> should be changed to <code>"Consonant"</code> — another value in the <code>After</code> column. Many studies of (t, d) deletion do not distinguish between pre-/h/ and other pre-consonantal contexts. The above re-code might be needed for comparing this (t, d) deletion data to other studies. Notice that there is no comma following <code>"H"</code> in the above code. This is because you are filtering a column; see how the filtering brackets <code>[ ]</code> come after the column specifier <code>$</code>. The comma is only used when filtering whole data frames because data frames can be filtered along two dimensions (e.g., rows and columns) and <em>R</em> needs to know which dimensions the filtering conditions apply to. When you filter just a column (or just a row), you don’t need the comma because the filtering only occurs along one dimension (in that column, or in that row only). You also need to run the second <code>factor()</code> function to get rid of the now empty <code>"H"</code> level.</p>
<p>If you get an error message when trying to re-code using this method and your column contains words (rather than numbers) try first re-classifying (i.e., changing the type of) your original column to a <em>character</em> column: <code>td$After.New &lt;- as.character(td$After.New)</code>, then proceeding with the above method.</p>
<p>The previous function sequence re-codes all <code>"H"</code> cells in the existing <code>After</code> column. If instead you wanted to create a new column with your re-code (so both possible coding options were available for later analyses), you could do so by creating a new column with the exact same values as <code>After</code> and then re-code that column. If you’ve been following along in <em>R</em>, your <code>After</code> column is already re-coded. To go back to the original form of the data as it exists in the tab-delimited-text file, simply reload that text file and assign it to the object <code>td</code>. Of course, this resets the deletion of the tokens following a vowel, so you must do that again too. Luckily, you’ve written all of your functions in a script file (rather than directly into the console) so this is easy to do: just highlight the code and press the execution command.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Start with a fresh import of the (t, d) data</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co"># into R</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>td <span class="ot">&lt;-</span> <span class="fu">read.delim</span>(<span class="st">"Data/deletiondata.txt"</span>)</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert each character column into a factor</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Dep.Var <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Dep.Var)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Stress <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Stress)</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Category <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Category)</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Morph.Type <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Morph.Type)</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Before <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Before)</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>After <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>After)</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Speaker <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Speaker)</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Sex <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Sex)</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Education <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Education)</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Job <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Job)</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Phoneme.Dep.Var <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Phoneme.Dep.Var)</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Subset data to remove previous 'Vowel' contexts</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>td <span class="ot">&lt;-</span> td[td<span class="sc">$</span>Before <span class="sc">!=</span> <span class="st">"Vowel"</span>, ]</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Before <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Before)</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Re-code 'H' to be 'Consonant' in a new column</span></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>After.New <span class="ot">&lt;-</span> td<span class="sc">$</span>After</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>After.New[td<span class="sc">$</span>After.New <span class="sc">==</span> <span class="st">"H"</span>] <span class="ot">&lt;-</span> <span class="st">"Consonant"</span></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>After.New <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>After.New)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The new column you create (<code>After.New</code>) is added at the end of the data frame. You can conceptualized this as the right edge of the data in an <em>Excel</em> spreadsheet. You can see this with the <code>summary()</code> or <code>str()</code> functions. The name of the new column you create doesn’t really matter, but it cannot include any spaces.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(td)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Dep.Var           Stress         Category        Morph.Type 
 Deletion:386   Stressed  :1047   Function:  57   Mono     :762  
 Realized:803   Unstressed: 142   Lexical :1132   Past     :311  
                                                  Semi-Weak:116  
                                                                 
                                                                 
                                                                 
                                                                 
             Before          After        Speaker         YOB       Sex    
 Liquid         :269   Consonant:215   INGM84 : 57   Min.   :1915   F:659  
 Nasal          :209   H        :157   MARM92 : 53   1st Qu.:1952   M:530  
 Other Fricative:130   Pause    :558   GARF87 : 52   Median :1984          
 S              :332   Vowel    :259   HUNF22 : 32   Mean   :1969          
 Stop           :249                   DONF15 : 28   3rd Qu.:1991          
                                       GARF37 : 28   Max.   :1999          
                                       (Other):939                         
        Education        Job          Phoneme.Dep.Var     After.New  
 Educated    :496   Blue   :130   t--T        :352    Consonant:372  
 Not Educated:317   Service:468   t--Deletion :296    Pause    :558  
 Student     :376   Student:376   t--Fricative:131    Vowel    :259  
                    White  :215   d--Deletion : 90                   
                                  d--T        : 73                   
                                  d--D        : 46                   
                                  (Other)     :201                   </code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(td)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   1189 obs. of  13 variables:
 $ Dep.Var        : Factor w/ 2 levels "Deletion","Realized": 2 1 1 1 2 1 1 1 1 1 ...
 $ Stress         : Factor w/ 2 levels "Stressed","Unstressed": 1 1 1 1 1 1 1 1 1 1 ...
 $ Category       : Factor w/ 2 levels "Function","Lexical": 2 2 2 2 2 2 2 2 2 2 ...
 $ Morph.Type     : Factor w/ 3 levels "Mono","Past",..: 1 1 1 1 1 1 1 1 1 1 ...
 $ Before         : Factor w/ 5 levels "Liquid","Nasal",..: 5 5 5 5 5 5 5 5 5 5 ...
 $ After          : Factor w/ 4 levels "Consonant","H",..: 1 1 1 1 1 1 1 1 1 1 ...
 $ Speaker        : Factor w/ 66 levels "ARSM91","BEAM91",..: 3 5 5 6 13 14 15 23 29 33 ...
 $ YOB            : int  1965 1955 1955 1952 1953 1958 1946 1942 1945 1949 ...
 $ Sex            : Factor w/ 2 levels "F","M": 1 1 1 1 2 2 1 2 2 1 ...
 $ Education      : Factor w/ 3 levels "Educated","Not Educated",..: 1 1 1 1 1 2 1 2 2 1 ...
 $ Job            : Factor w/ 4 levels "Blue","Service",..: 4 4 4 2 2 2 2 1 1 2 ...
 $ Phoneme.Dep.Var: Factor w/ 18 levels "d--Affricate",..: 18 12 12 12 18 12 12 12 12 12 ...
 $ After.New      : Factor w/ 3 levels "Consonant","Pause",..: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
</div>
</div>
</section>
<section id="centering-continuous-variables" class="level2">
<h2 class="anchored" data-anchor-id="centering-continuous-variables">Centering Continuous Variables</h2>
<p>Some variables, like year of birth, are not discrete but are continuous. Some statisticians advocate centering continuous variables before including them in certain tests or models. In the Regression Analysis section you’ll learn when/if you need to center your variables.</p>
<p><em>Centering</em> entails expressing each value of a continuous variable as that value’s difference from the mean of all values of the variable. For example, the <em>td</em> data frame has a column for speaker year of birth: <code>YOB</code>. The mean of all the years of birth (after the pre-vowel tokens are removed) is <code>1969</code>. Centering this variable simply means expressing years of birth like 1952 and 1989, as 17 (<span class="math inline">\(=1969-1952\)</span>) and -20 (<span class="math inline">\(=1969-1989\)</span>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Center YOB</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Center.Age <span class="ot">&lt;-</span> <span class="fu">scale</span>(td<span class="sc">$</span>YOB, <span class="at">scale =</span> <span class="cn">FALSE</span>)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Center.Age <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(td<span class="sc">$</span>Center.Age)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Center.Age <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">scale</span>(td<span class="sc">$</span>YOB, <span class="at">scale =</span> <span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The <code>scale()</code> function centers the values in the column <code>YOB</code> and assigns those Centered values to a new column called <code>Center.Age</code>. The option <code>scale = FALSE</code> indicates that the centered values remain in the original units (in this case years). If you change this option to <code>scale = TRUE</code>, the overall mean is subtracted from each value and then each values is divided by the overall standard deviation. This is needed if you are including multiple continuous variables in a model that are expressed using different units and vary along differing scales. When the data is centred and scalled the new values are called <strong>z-scores</strong> or <strong>standardized scores</strong> and you can think of each value as describing the raw value in terms of its distance from the mean when measured in standard deviation units.</p>
<p>For example, imagine a study of variable word-initial voice onset time in which you want to look at the effect of following vowel backness and year of birth of the speaker. Each of these variables are continuous, but voice onset time is <span class="math inline">\(\pm20\)</span> ms around its mean, year of birth is <span class="math inline">\(\pm45\)</span> years around its mean, and F2 is <span class="math inline">\(\pm300\)</span> Hz around its mean. By expressing these values as <strong>z-scores</strong>, you can account for both the differing units and differing scales of each. Even if you have one variable, here just <code>YOB</code>, it is okay to scale the values, but do <em>NOT</em> do this here. Leave <code>YOB</code> in years. This will make the interpretation of later statistical estimates a little easier.</p>
<p>After running your <code>scale()</code> function you must also run a function to tell <em>R</em> how to treat your new column <code>Center.Age.</code> <em>R</em> knows the column is filled with numbers, but <em>R</em> doesn’t know if those numbers are continuous, if they are ordered in a specific way, or if they are factors with names expressed as digits. You use the function <code>as.numeric()</code> to tell <em>R</em> that the values are continuous numbers. This is very similar to what you did above with the function <code>factor()</code>, which tells <em>R</em> to consider whatever is inside the function to be a factor. Also, with <code>After.New</code> above, where the data structure is inherited from <code>After</code>, you used <code>factor()</code> to remove the remaining <code>H</code> level name. You did this by telling <code>R</code> to consider whatever was inside the <code>factor()</code> function as a factor, and, as part of that, <code>R</code> reads all the levels inside that column and chooses them as the factors. Here you are doing the same thing. You’re telling <code>R</code> to look at the values inside <code>Center.Age</code> and consider them as being continuous numbers. You can do this as a secondary step after you create the column <code>Center.Age</code>, as shown in the first two rows. Or you can embed the <code>scale()</code> function inside the <code>as.numeric()</code> function, <code>as.numeric(scale())</code>, as shown in the last line.</p>
</section>
<section id="dividing-a-continuous-variable" class="level2">
<h2 class="anchored" data-anchor-id="dividing-a-continuous-variable">Dividing a Continuous Variable</h2>
<p>There are other ways you can represent age. Instead of a continuous variable, you can categorize speakers as belonging to a “young”, “middle aged”, or “old” age group. You might also group speakers based on decade of birth or as being born before or after some event — whatever makes sense for your study or community.</p>
<p>How to divide speakers by age is something that should be informed by sociolinguistic theory, demographics, and your own understanding of your data. The birth years 1980 and 1945, used here, represent generational divides in Cape Breton that can be independently justified (Gardner 2013). Grouping speakers like this is very common, and not particularly difficult to do in <em>R</em>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a 3-way Age Group</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Age.Group[td<span class="sc">$</span>YOB <span class="sc">&gt;</span> <span class="dv">1979</span>] <span class="ot">&lt;-</span> <span class="st">"Young"</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Age.Group[td<span class="sc">$</span>YOB <span class="sc">&gt;</span> <span class="dv">1944</span> <span class="sc">&amp;</span> td<span class="sc">$</span>YOB <span class="sc">&lt;</span> <span class="dv">1980</span>] <span class="ot">&lt;-</span> <span class="st">"Middle"</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Age.Group[td<span class="sc">$</span>YOB <span class="sc">&lt;</span> <span class="dv">1945</span>] <span class="ot">&lt;-</span> <span class="st">"Old"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>First you will need a new column for your age group variable. Here, call it <code>Age.Group</code>.You use the assignment operator <code>&lt;-</code> to fill all the cells in the new column <code>Age.Group</code> based on the values that are in the already existing <code>YOB</code> column. The first line says that for any rows in which <code>YOB</code> is greater than 1979, fill the empty cell in those same rows in the column <code>Age.Group</code> with the value <code>Young</code>. The second line does the same thing but includes two conditions: that <code>YOB</code> is greater than 1944 and that it is also less than 1980. For these rows, the value <code>Middle</code> is inserted in the <code>Age.Group</code> column. Even though the two conditions (<code>YOB &gt; 1944</code>, <code>YOB &lt; 1980</code>) refer to the same column, you need to fully specify each condition with both a column reference and a condition with an operator. So, for example, writing <code>td$Age.Group[td$YOB &gt;1944 &amp; &lt;1970]</code> will not work. The third line instructs <code>R</code> to put <code>Old</code> in the <code>Age.Group</code> column for any row where <code>YOB</code> is less than 1945. Because this new column includes words, <em>R</em> will automatically categorize the column as <code>character</code> data. To rectify this, see the next section.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(td<span class="sc">$</span>Age.Group)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
</section>
<section id="changing-the-order-of-levels" class="level2">
<h2 class="anchored" data-anchor-id="changing-the-order-of-levels">Changing the Order of Levels</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Age.Group <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Age.Group, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Young"</span>,</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Middle"</span>, <span class="st">"Old"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The code above does two things. First, it tells <code>R</code> that you want the new <code>Age.Group</code> column to be a column of factors, and second, it also tells <code>R</code> how you want those factors to be ordered. When <code>R</code> extracts the name of the factors of a column (based on the levels that are in that column) it orders the factors by name alphabetically. For example, the <code>Sex</code> column contains two levels: <code>M</code> and <code>F</code>. The first 500 tokens in your data frame might comes from males but <code>R</code> will still list the names of the factors in the column (which are based on those two levels) as <code>F</code> and then <code>M</code>, because <code>F</code> is closer to the start of the alphabet than <code>M</code>. If you run <code>summary(td)</code> you can see that the factor names listed in all of the factor columns are in alphabetical order. Sometimes this alphabetical ordering doesn’t matter. Other times it is makes a big difference.</p>
<p>Any time factors are used in a statistical test or appear in a graph, the order of factor names is very important. For example, which factor is selected as the application value and which factor(s) are the non-application value(s) of a dependent variable is determined by factor name order. As for graphs, all kinds of layout parameters are set by the factor order of a variable. For example, if you left the <code>Age.Group</code> factor as it is, it would always list the <code>Age.Group</code> levels as <code>Middle</code>, <code>Old</code>, <code>Young</code>. On a graph like a bar graph it would arrange the bars for each age group alphabetically from left to right. This is not desirable. You will always want <code>Age.Group</code> ordered as either <code>Young</code>, <code>Middle</code>, <code>Old</code> or <code>Old</code>, <code>Middle</code>, <code>Young</code>. This is what the second part of the <code>factor()</code> command does. First it tells <code>R</code> to consider the values in the <code>Age.Group</code> to be factors, then it specifies that you want the factors (which get their names from the levels) to be ordered in certain way. You use <code>levels =</code> and the concatenating <code>c()</code> function to specify that you want the factors to get their names from the levels in the following order <code>"Young", "Middle", "Old"</code>, and thus also be ordered in that way.</p>
<p>This might seem confusing. Think about coins. Imagine you have a bag of change. Each coin in that bag is like a token in your column in the data frame. The levels of the column are just the different kinds of coins there are. You can root around in the bag and figure out what coins are in it without having to put the coins in any particular order. This is the “levels” of the coins. If you ask <em>R</em> what coins are in your bag, it will tell you there are “dimes”, “nickels”, “pennies”, and “quarters”. These levels are in alphabetical order, but only for a lack of a better way to tell you them. Telling you the levels doesn’t imply any sort of ordering of the coins. Making the coin bag into a factor column is like putting the coins into a change tray, like the change trays in cash registers. Coins inside of a change tray go from being unstructured to being organized based on a structure. This makes them factors. In a cash tray each coin is grouped with other coins just like it. Each slot in the drawer also has a name. <em>R</em> just automatically gives the slots the same name as the coins (e.g.&nbsp;levels) that are in it. The order of the slots from right to left is also by default alphabetical based on the name of each slot. So, coin (= level), slot name (= factor name) and slot order (= factor order) are three independent parameters. The function <code>td$Age.Group &lt;-factor(td$Age.Group, levels = c("Young", "Middle", "Old"))</code> is basically saying take all the coins out of the cash drawer, then put them back in the drawer in in a specific order, with <code>Young</code> going in the first slot. The slots then take the names of the coins that go into them.</p>
</section>
<section id="reversing-the-order-of-levels" class="level2">
<h2 class="anchored" data-anchor-id="reversing-the-order-of-levels">Reversing the Order of Levels</h2>
<p>To reverse the order of levels you can embed the <code>rev()</code> function inside your <code>factor()</code> function</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(td<span class="sc">$</span>Age.Group)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Young"  "Middle" "Old"   </code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Age.Group <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Age.Group, <span class="at">levels =</span> <span class="fu">rev</span>(<span class="fu">levels</span>(td<span class="sc">$</span>Age.Group)))</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(td<span class="sc">$</span>Age.Group)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Old"    "Middle" "Young" </code></pre>
</div>
</div>
</section>
<section id="combining-columns" class="level2">
<h2 class="anchored" data-anchor-id="combining-columns">Combining Columns</h2>
<p>It is often useful to combine two columns, or factor groups, into one. For example, it might be useful to have a way of grouping tokens not by <code>Age.Group</code> or <code>Sex</code>, but instead by the combination of <code>Age.Group</code> and <code>Sex</code>. While it is not difficult to test the potential interaction of these two factor groups in statistical tests in <em>R</em>, for specifically generating summary statistics it is much easier to examine the combination of <code>Age.Group</code> and <code>Sex</code> (or any two columns) by first creating a new column combining them.</p>
<p>Combining columns is done using the function <code>paste()</code>, which you embed inside of the <code>factor()</code> function so that the resulting column will be a column of factors. Inside <code>paste()</code> you list the two columns you want to combine (you could list more) and then tell <em>R</em> how to separate the values from each of the columns. Here the code tells <em>R</em> to put an underscore *_* between the values for <code>Age.Group</code> and <code>Sex</code>, resulting in new values like <code>Old_M</code> and <code>Middle_F</code>. The new column will be called <code>Age_Sex</code>. If we want to order these values in any particular way, we can do that with the <code>level=</code> option in <code>factor()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine Columns</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Age_Sex <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">paste</span>(td<span class="sc">$</span>Age.Group, td<span class="sc">$</span>Sex, <span class="at">sep =</span> <span class="st">"_"</span>),</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Young_F"</span>, <span class="st">"Middle_F"</span>, <span class="st">"Old_F"</span>, <span class="st">"Young_M"</span>,</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Middle_M"</span>, <span class="st">"Old_M"</span>))</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(td<span class="sc">$</span>Age_Sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Young_F"  "Middle_F" "Old_F"    "Young_M"  "Middle_M" "Old_M"   </code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Reorder factor levels</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Age_Sex <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Age_Sex, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Young_F"</span>,</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Young_M"</span>, <span class="st">"Middle_F"</span>, <span class="st">"Middle_M"</span>, <span class="st">"Old_F"</span>, <span class="st">"Old_M"</span>))</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(td<span class="sc">$</span>Age_Sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Young_F"  "Young_M"  "Middle_F" "Middle_M" "Old_F"    "Old_M"   </code></pre>
</div>
</div>
</section>
<section id="splitting-columns" class="level2">
<h2 class="anchored" data-anchor-id="splitting-columns">Splitting Columns</h2>
<p>You may have noticed that the data frame <code>td</code> has one column that is actually two variables. The column <code>Phoneme.Dep.Var</code> combines both the underlying phoneme of the token, either <code>t</code> (t) or <code>d</code> (d), with a more descriptive coding of the dependent variable. In the dialect where this data comes from (t) and (d) can be realized in up to nine different ways, only one of which is <code>Deletion</code>. In your analysis you might want to consider if deletion is more likely if the underlying phoneme is (t) or (d). In order to do this you must break <code>Phoneme</code> away from the more elaborate <code>Dep.Var</code> coding. To do this, you will use a function that is beyond <em>R</em>’s base functionality and part of the <code>dplyr</code> package. First you load the <code>dplyr</code> package from your library using <code>library()</code>, then you use the function <code>mutate()</code> to tell <em>R</em> how to break up the column. The <code>dplyr</code> package is very powerful. We will look at additional uses as this guide progresses.</p>
<p>To be honest, splitting columns is an operation that is much simpler and usually faster to do using <em>Excel</em>, or another spreadsheet program. I never use <em>R</em> to split columns because, while the <code>mutate()</code> function itself is not tricky, figuring out the exact sequence of <code>regular expressions</code> I need to split my columns is challenging. If you absolutely must split columns in <em>R</em>, below are instructions. Keep in mind that this method will only work for columns with predictable structures, like <code>Phoneme.Dep.Var</code>.</p>
<p>The values in the column <code>Phoneme.Dep.Var</code> are predictable, in other words, they all follow the same pattern. You can exploit this regularity to tell <em>R</em> exactly where to break the <code>Phoneme.Dep.Var</code> values into two. If you execute the command <code>levels(td$Phoneme.Dep.Var)</code> you can very easily see the pattern.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(td<span class="sc">$</span>Phoneme.Dep.Var)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "d--Affricate"       "d--D"               "d--Deletion"       
 [4] "d--Ejective"        "d--Flap"            "d--Fricative"      
 [7] "d--Glottal Stop"    "d--Other Weakening" "d--T"              
[10] "t--Affricate"       "t--D"               "t--Deletion"       
[13] "t--Ejective"        "t--Flap"            "t--Fricative"      
[16] "t--Glottal Stop"    "t--Other Weakening" "t--T"              </code></pre>
</div>
</div>
<p>The first part of every value is either <code>t</code> or <code>d</code>, then there are two hyphens, then a word describing the realization of (t) or (d). If you split <code>Phoneme.Dep.Var</code> at the hyphens you’ll be left with two values: one that is either <code>t</code> or <code>d</code>, and another that describes the realization of (t) or (d). So, for the new <code>Phoneme</code> column you want the one character before the hyphens from <code>Phoneme.Dep.Var</code>, and for the new <code>Dep.Var.Full</code> column, you want all the characters — however many there are – that come after the two hyphens.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Break Phoneme.Dep.Var into two columns</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>td <span class="ot">&lt;-</span> <span class="fu">mutate</span>(td, <span class="at">Phoneme =</span> <span class="fu">sub</span>(<span class="st">"^(.)(--.*)$"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">1"</span>,</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>    Phoneme.Dep.Var), <span class="at">Dep.Var.Full =</span> <span class="fu">sub</span>(<span class="st">"^(.--)(.*)$"</span>,</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"</span><span class="sc">\\</span><span class="st">2"</span>, Phoneme.Dep.Var), <span class="at">Phoneme.Dep.Var =</span> <span class="cn">NULL</span>)</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Dep.Var.Full <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Dep.Var.Full)</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Phoneme <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Phoneme)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The procedure here is somewhat complicated. I always have to double-check how these complicated procedures work. Either by looking up the functions or checking my old script files. You can look up how a function like <code>mutate()</code> works by placing a question mark before the function in the console window, e.g.&nbsp;<code>?mutate()</code>.</p>
</div>
</div>
<p>Above, inside the <code>mutate()</code> function, first you specify the data frame object you want to mutate (here <code>td</code>), and then how to mutate it. The mutations include creating a new column called <code>Phoneme</code> and then telling <em>R</em> what do put in it, creating a new column called <code>Dep.Var.Full</code> and then telling <em>R</em> what to put in it, and then taking the <code>Phoneme.Dep.Var</code> column and making it equal <code>NULL</code> — in other words, deleting it. For the <code>Phoneme</code> and <code>Dep.Var.Full</code> columns you specify what values to insert in each cell using the <code>sub()</code> function, which returns a “sub” or divided section of a value within some cell. The <code>sub()</code> function’s first argument is a pattern of <em>regular expressions</em> to search for, the second is a character string to replace the pattern with, and the third is the column in which to search for the pattern.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>I don’t have <em>R</em>’s regular expressions memorized; I always have to look them up <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/regex.html">here</a>.</p>
</div>
</div>
<p>For the <code>sub()</code> functions meant to create values for <code>Phoneme</code> and for <code>Dep.Var.Full</code> you tell <em>R</em> to search <code>Phoneme.Dep.Var</code> for the pattern <code>"^.--.*$"</code>. This series of regular expressions describes the following pattern: a text string beginning with one single character, followed by two hyphens, and then any number of characters. The quotation marks <code>" "</code> indicate a text string. The <code>^</code> and <code>$</code> indicate the beginning and end of a text string, respectively.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> The period <code>.</code> indicates a single character and the asterisk<code>*</code> indicates zero or more of whatever comes before that asterisk. So <code>.*</code> means any one or more characters. The two hyphens <code>--</code> are just two hyphens. The parentheses in the regular expressions relate to the second substitution element. In the <code>sub()</code> function responsible for creating values for the new <code>Phoneme</code> column, you break the values that match the regular expression pattern into two parts: the one character before the two hyphens <code>(.)</code> and then everything after it <code>(--.*)</code>; then you tell <em>R</em> to substitute (or rather place) the first of those two elements <code>\\1</code> as text <code>" "</code> in the new column. In the <code>sub()</code> function responsible for creating the values for the new <code>Dep.Var.Full</code> column, you break the values that match the regular expression pattern into two parts: the two hyphens and the one character that comes before them <code>(.--)</code> and then the one or more characters that come after the hyphens <code>(.*)</code>; then tell <em>R</em> to to substitute (or rather place) the second of those elements <code>\\2</code> as text <code>" "</code> in the new column.</p>
<p>The last two lines simply make these two new columns into factor columns.</p>
</section>
<section id="partitioning-data-frames" class="level2">
<h2 class="anchored" data-anchor-id="partitioning-data-frames">Partitioning Data Frames</h2>
<p>Many times in my own work I have only wanted to work in <em>R</em> with a subset of my full dataset. For example, I frequently want to run separate regression analyses on data from old speakers, middle age speakers, and young speakers. Other times I’ve had large datasets that combine multiple corpora and have wanted to run tests on data from just one corpus. Being able to partition (subset) my data frame has therefore been very useful.</p>
<p>There are two main ways to partition your data. One method involves using the filtering functionality of <em>R</em> detailed above. For example, the first line code below represents the <code>td</code> data from <code>young</code> speakers only. The second line of codes assigns that subset of <code>td</code> to a completely new data frame.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Subset of td where Age.Group only equals Young</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>td[td<span class="sc">$</span>Age.Group <span class="sc">==</span> <span class="st">"Young"</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create td.young which equals subset of td where</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Age. Group only equals Young</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>td.young <span class="ot">&lt;-</span> td[td<span class="sc">$</span>Age.Group <span class="sc">==</span> <span class="st">"Young"</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In your tests you can use the filtered version of <code>td</code> or you can use the new data frame <code>td.young</code>. I recommend using the new data frame if you are using any centered continuous variables. This is because centered continuous variables are centered around the mean of the values in the column that is centered. If you partition the data, that mean will be different because the range of values within the the centered column are now different. So, if you partition your data, especially by age, you should re-center your continuous variables.</p>
<p>The second way to partition your data is using the <code>subset()</code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create three partitions based on Age.Group</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>td.young <span class="ot">&lt;-</span> <span class="fu">subset</span>(td, Age.Group <span class="sc">==</span> <span class="st">"Young"</span>)</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>td.middle <span class="ot">&lt;-</span> <span class="fu">subset</span>(td, Age.Group <span class="sc">==</span> <span class="st">"Middle"</span>)</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>td.old <span class="ot">&lt;-</span> <span class="fu">subset</span>(td, Age.Group <span class="sc">==</span> <span class="st">"Old"</span>)</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Re-Center Center.Age</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>td.young<span class="sc">$</span>Center.Age <span class="ot">&lt;-</span> <span class="fu">scale</span>(td.young<span class="sc">$</span>YOB, <span class="at">scale =</span> <span class="cn">FALSE</span>)</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>td.middle<span class="sc">$</span>Center.Age <span class="ot">&lt;-</span> <span class="fu">scale</span>(td.middle<span class="sc">$</span>YOB, <span class="at">scale =</span> <span class="cn">FALSE</span>)</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>td.old<span class="sc">$</span>Center.Age <span class="ot">&lt;-</span> <span class="fu">scale</span>(td.old<span class="sc">$</span>YOB, <span class="at">scale =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The usefulness of <code>subset()</code> is when you want to partition your data frame based on several factors. For example, compare the filtering versus <code>subset()</code> methods when partitioning <code>td</code> for just middle-age, blue-collar men. Using <code>subset()</code> saves you from having to type <code>td$</code> multiple times, and you don’t need the final <code>,</code>. Below <code>&amp;</code> is the standard operator meaning “and”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Subset of td where Age.Group is Middle, Sex is</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="co"># M, and Job is Blue</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>td.midmenblue <span class="ot">&lt;-</span> td[td<span class="sc">$</span>Age.Group <span class="sc">==</span> <span class="st">"Middle"</span> <span class="sc">&amp;</span> td<span class="sc">$</span>Sex <span class="sc">==</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"M"</span> <span class="sc">&amp;</span> td<span class="sc">$</span>Job <span class="sc">==</span> <span class="st">"Blue"</span>, ]</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Subset of td where Age.Group is Middle, Sex is</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a><span class="co"># M, and Job is Blue</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>td.midmenblue <span class="ot">&lt;-</span> <span class="fu">subset</span>(td, Age.Group <span class="sc">==</span> <span class="st">"Middle"</span> <span class="sc">&amp;</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>    Sex <span class="sc">==</span> <span class="st">"M"</span> <span class="sc">&amp;</span> Job <span class="sc">==</span> <span class="st">"Blue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>When you subset your data frame, using either method, and assign it to a new data frame, your new data frame inherits the structure of your old data frame. This means that there will be lots of columns that list empty levels. If you execute <code>summary(td.midmenblue)}</code> you’ll see see that <code>Job</code> still lists <code>Service</code>, <code>Student</code>, and <code>White</code> as factors with 0 tokens each. To remove these empty levels you could use the <code>factor()</code> function on each column with empty levels (as you did above), or you can use the function <code>droplevels()</code> to tell <em>R</em> to drop any empty levels from each column in the data frame. You need to make sure to also assign the dropped levels data frame to the original data frame, as shown below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(td.midmenblue)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Dep.Var          Stress       Category      Morph.Type
 Deletion:30   Stressed  :49   Function: 3   Mono     :38  
 Realized:27   Unstressed: 8   Lexical :54   Past     :15  
                                             Semi-Weak: 4  
                                                           
                                                           
                                                           
                                                           
             Before         After       Speaker        YOB       Sex   
 Liquid         :13   Consonant:16   GREM45 :18   Min.   :1945   F: 0  
 Nasal          : 3   H        : 9   HOLM52 :16   1st Qu.:1945   M:57  
 Other Fricative: 6   Pause    :20   SMIM61 :16   Median :1952         
 S              :18   Vowel    :12   CLAM73 : 4   Mean   :1954         
 Stop           :17                  HANM57 : 3   3rd Qu.:1961         
                                     ARSM91 : 0   Max.   :1973         
                                     (Other): 0                        
        Education       Job         After.New    Center.Age       Age.Group 
 Educated    : 0   Blue   :57   Consonant:25   Min.   :-24.447   Old   : 0  
 Not Educated:57   Service: 0   Pause    :20   1st Qu.:-24.447   Middle:57  
 Student     : 0   Student: 0   Vowel    :12   Median :-17.447   Young : 0  
                   White  : 0                  Mean   :-15.394              
                                               3rd Qu.: -8.447              
                                               Max.   :  3.553              
                                                                            
     Age_Sex   Phoneme    Dep.Var.Full
 Young_F : 0   d:11    Deletion :30   
 Young_M : 0   t:46    T        :19   
 Middle_F: 0           Fricative: 6   
 Middle_M:57           D        : 1   
 Old_F   : 0           Flap     : 1   
 Old_M   : 0           Affricate: 0   
                       (Other)  : 0   </code></pre>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop empty levels across dataset</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>td.midmenblue <span class="ot">&lt;-</span> <span class="fu">droplevels</span>(td.midmenblue)</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(td.midmenblue)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Dep.Var          Stress       Category      Morph.Type
 Deletion:30   Stressed  :49   Function: 3   Mono     :38  
 Realized:27   Unstressed: 8   Lexical :54   Past     :15  
                                             Semi-Weak: 4  
                                                           
                                                           
                                                           
             Before         After      Speaker        YOB       Sex   
 Liquid         :13   Consonant:16   CLAM73: 4   Min.   :1945   M:57  
 Nasal          : 3   H        : 9   GREM45:18   1st Qu.:1945         
 Other Fricative: 6   Pause    :20   HANM57: 3   Median :1952         
 S              :18   Vowel    :12   HOLM52:16   Mean   :1954         
 Stop           :17                  SMIM61:16   3rd Qu.:1961         
                                                 Max.   :1973         
        Education    Job         After.New    Center.Age       Age.Group 
 Not Educated:57   Blue:57   Consonant:25   Min.   :-24.447   Middle:57  
                             Pause    :20   1st Qu.:-24.447              
                             Vowel    :12   Median :-17.447              
                                            Mean   :-15.394              
                                            3rd Qu.: -8.447              
                                            Max.   :  3.553              
     Age_Sex   Phoneme    Dep.Var.Full
 Middle_M:57   d:11    D        : 1   
               t:46    Deletion :30   
                       Flap     : 1   
                       Fricative: 6   
                       T        :19   
                                      </code></pre>
</div>
</div>
</section>
<section id="interim-summary" class="level2">
<h2 class="anchored" data-anchor-id="interim-summary">Interim Summary</h2>
<p>Below is the full code for loading the data file and then re-coding it. As you progress through the next sections, if for any reason you have a problem, it may be useful to recreate the <em>R</em> object <code>td</code> from scratch. Going forward in these instructions, the <code>td</code> object will be the object as it exists at the end of this code.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>td <span class="ot">&lt;-</span> <span class="fu">read.delim</span>(<span class="st">"https://www.dropbox.com/s/jxlfuogea3lx2pu/deletiondata.txt?dl=1"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Or…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>td <span class="ot">&lt;-</span> <span class="fu">read.delim</span>(<span class="st">"Data/deletiondata.txt"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Then…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Subset data to remove previous 'Vowel' contexts</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>td <span class="ot">&lt;-</span> td[td<span class="sc">$</span>Before <span class="sc">!=</span> <span class="st">"Vowel"</span>, ]</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Before <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Before)</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Re-code 'H' to be 'Consonant' in a new column</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>After.New <span class="ot">&lt;-</span> td<span class="sc">$</span>After</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>After.New[td<span class="sc">$</span>After.New <span class="sc">==</span> <span class="st">"H"</span>] <span class="ot">&lt;-</span> <span class="st">"Consonant"</span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>After.New <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>After.New)</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Center Year of Birth</span></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Center.Age <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">scale</span>(td<span class="sc">$</span>YOB, <span class="at">scale =</span> <span class="cn">FALSE</span>))</span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Create Age.Group</span></span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Age.Group[td<span class="sc">$</span>YOB <span class="sc">&gt;</span> <span class="dv">1979</span>] <span class="ot">&lt;-</span> <span class="st">"Young"</span></span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Age.Group[td<span class="sc">$</span>YOB <span class="sc">&gt;</span> <span class="dv">1944</span> <span class="sc">&amp;</span> td<span class="sc">$</span>YOB <span class="sc">&lt;</span> <span class="dv">1980</span>] <span class="ot">&lt;-</span> <span class="st">"Middle"</span></span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Age.Group[td<span class="sc">$</span>YOB <span class="sc">&lt;</span> <span class="dv">1945</span>] <span class="ot">&lt;-</span> <span class="st">"Old"</span></span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Age.Group <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Age.Group, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Young"</span>,</span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Middle"</span>, <span class="st">"Old"</span>))</span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine Age and Sex</span></span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Age_Sex <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">paste</span>(td<span class="sc">$</span>Age.Group, td<span class="sc">$</span>Sex, <span class="at">sep =</span> <span class="st">"_"</span>))</span>
<span id="cb46-18"><a href="#cb46-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Break Phoneme.Dep.Var into two columns</span></span>
<span id="cb46-19"><a href="#cb46-19" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb46-20"><a href="#cb46-20" aria-hidden="true" tabindex="-1"></a>td <span class="ot">&lt;-</span> <span class="fu">mutate</span>(td, <span class="at">Phoneme =</span> <span class="fu">sub</span>(<span class="st">"^(.)(--.*)$"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">1"</span>,</span>
<span id="cb46-21"><a href="#cb46-21" aria-hidden="true" tabindex="-1"></a>    Phoneme.Dep.Var), <span class="at">Dep.Var.Full =</span> <span class="fu">sub</span>(<span class="st">"^(.--)(.*)$"</span>,</span>
<span id="cb46-22"><a href="#cb46-22" aria-hidden="true" tabindex="-1"></a>    <span class="st">"</span><span class="sc">\\</span><span class="st">2"</span>, Phoneme.Dep.Var), <span class="at">Phoneme.Dep.Var =</span> <span class="cn">NULL</span>)</span>
<span id="cb46-23"><a href="#cb46-23" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Phoneme <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Phoneme)</span>
<span id="cb46-24"><a href="#cb46-24" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Dep.Var.Full <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Dep.Var.Full)</span>
<span id="cb46-25"><a href="#cb46-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Create three partitions based on Age.Group</span></span>
<span id="cb46-26"><a href="#cb46-26" aria-hidden="true" tabindex="-1"></a>td.young <span class="ot">&lt;-</span> <span class="fu">droplevels</span>(<span class="fu">subset</span>(td, Age.Group <span class="sc">==</span> <span class="st">"Young"</span>))</span>
<span id="cb46-27"><a href="#cb46-27" aria-hidden="true" tabindex="-1"></a>td.middle <span class="ot">&lt;-</span> <span class="fu">droplevels</span>(<span class="fu">subset</span>(td, Age.Group <span class="sc">==</span> <span class="st">"Middle"</span>))</span>
<span id="cb46-28"><a href="#cb46-28" aria-hidden="true" tabindex="-1"></a>td.old <span class="ot">&lt;-</span> <span class="fu">droplevels</span>(<span class="fu">subset</span>(td, Age.Group <span class="sc">==</span> <span class="st">"Old"</span>))</span>
<span id="cb46-29"><a href="#cb46-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Re-center Center.Age</span></span>
<span id="cb46-30"><a href="#cb46-30" aria-hidden="true" tabindex="-1"></a>td.young<span class="sc">$</span>Center.Age <span class="ot">&lt;-</span> <span class="fu">scale</span>(td.young<span class="sc">$</span>YOB, <span class="at">scale =</span> <span class="cn">FALSE</span>)</span>
<span id="cb46-31"><a href="#cb46-31" aria-hidden="true" tabindex="-1"></a>td.middle<span class="sc">$</span>Center.Age <span class="ot">&lt;-</span> <span class="fu">scale</span>(td.middle<span class="sc">$</span>YOB, <span class="at">scale =</span> <span class="cn">FALSE</span>)</span>
<span id="cb46-32"><a href="#cb46-32" aria-hidden="true" tabindex="-1"></a>td.old<span class="sc">$</span>Center.Age <span class="ot">&lt;-</span> <span class="fu">scale</span>(td.old<span class="sc">$</span>YOB, <span class="at">scale =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


<!-- -->

</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>You use <code>$</code> in other places for specifying columns within data frames, but here it’s inside quotation marks and serving a different function.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div id="quarto-reuse" class="quarto-appendix-contents"><div>CC-BY-SA 4.0</div></div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{gardner2022,
  author = {Gardner, Matt Hunt},
  title = {Modifying {Data}},
  series = {Linguistics Methods Hub},
  volume = {Doing LVC with R},
  date = {2022-09-27},
  url = {https://lingmethodshub.github.io/content/R/lvc_r/040_lvcr.html},
  doi = {10.5281/zenodo.7160718},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-gardner2022" class="csl-entry quarto-appendix-citeas" role="listitem">
Gardner, Matt Hunt. 2022, September 27. Modifying Data. <em>Linguistics
Methods Hub</em>: <em>Doing LVC with R</em>. (<a href="https://lingmethodshub.github.io/content/R/lvc_r/040_lvcr.html">https://lingmethodshub.github.io/content/R/lvc_r/040_lvcr.html</a>).
doi: <a href="https://doi.org/10.5281/zenodo.7160718">10.5281/zenodo.7160718</a>
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../../content/R/lvc_r/030_lvcr.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Getting to Know Your Data</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../../content/R/lvc_r/050_lvcr.html" class="pagination-link">
        <span class="nav-page-text">Doing it all again, but <code>tidy</code></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb47" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Modifying Data"</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "2022-9-27"</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="an">license:</span><span class="co"> "CC-BY-SA 4.0"</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="an">description:</span><span class="co"> "Modifying data, including removing rows, re-coding variables, centering continuous variables, dividing continuous variables, changing the order of variables, reversing the order of variables, combining columns, splitting columns, and partitioning data sets."</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"renv/activate.R"</span>)</span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a><span class="in">```{r setup, include=FALSE}</span></span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">echo =</span> <span class="cn">TRUE</span>)</span>
<span id="cb47-17"><a href="#cb47-17" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">tidy=</span><span class="st">'styler'</span>, <span class="at">tidy.opts=</span><span class="fu">list</span>(<span class="at">strict=</span><span class="cn">TRUE</span>, <span class="at">scope=</span><span class="st">"tokens"</span>, <span class="at">width.cutoff=</span><span class="dv">50</span>), <span class="at">tidy =</span> <span class="cn">TRUE</span>)</span>
<span id="cb47-18"><a href="#cb47-18" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-19"><a href="#cb47-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-20"><a href="#cb47-20" aria-hidden="true" tabindex="-1"></a>If you followed the previous section you now have an object in *R* called <span class="in">`td`</span> in which all character columns are converted to factors. If not, you can load it now with either of the following codes.</span>
<span id="cb47-21"><a href="#cb47-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-22"><a href="#cb47-22" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval=TRUE}</span></span>
<span id="cb47-23"><a href="#cb47-23" aria-hidden="true" tabindex="-1"></a>td <span class="ot">&lt;-</span><span class="fu">read.delim</span>(<span class="st">"https://www.dropbox.com/s/jxlfuogea3lx2pu/deletiondata.txt?dl=1"</span>)</span>
<span id="cb47-24"><a href="#cb47-24" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-25"><a href="#cb47-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-26"><a href="#cb47-26" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval=TRUE}</span></span>
<span id="cb47-27"><a href="#cb47-27" aria-hidden="true" tabindex="-1"></a>td <span class="ot">&lt;-</span> <span class="fu">read.delim</span>(<span class="st">"Data/deletiondata.txt"</span>)</span>
<span id="cb47-28"><a href="#cb47-28" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-29"><a href="#cb47-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-30"><a href="#cb47-30" aria-hidden="true" tabindex="-1"></a>Re-class character columns as factors.</span>
<span id="cb47-31"><a href="#cb47-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-34"><a href="#cb47-34" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-35"><a href="#cb47-35" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Dep.Var <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Dep.Var)</span>
<span id="cb47-36"><a href="#cb47-36" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Stress <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Stress)</span>
<span id="cb47-37"><a href="#cb47-37" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Category <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Category)</span>
<span id="cb47-38"><a href="#cb47-38" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Morph.Type<span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Morph.Type)</span>
<span id="cb47-39"><a href="#cb47-39" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Before <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Before)</span>
<span id="cb47-40"><a href="#cb47-40" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>After <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>After)</span>
<span id="cb47-41"><a href="#cb47-41" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Speaker <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Speaker)</span>
<span id="cb47-42"><a href="#cb47-42" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Sex <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Sex)</span>
<span id="cb47-43"><a href="#cb47-43" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Education <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Education)</span>
<span id="cb47-44"><a href="#cb47-44" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Job <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Job)</span>
<span id="cb47-45"><a href="#cb47-45" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Phoneme.Dep.Var <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Phoneme.Dep.Var)</span>
<span id="cb47-46"><a href="#cb47-46" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-47"><a href="#cb47-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-48"><a href="#cb47-48" aria-hidden="true" tabindex="-1"></a>Deleting tokens, re-coding tokens, combining factor groups, etc. is, in my opinion, easier to do in *Excel*. But, if you want to do this in *R*, or you only want to perform the modification for a specific analysis or graph, you may find the following functions useful.</span>
<span id="cb47-49"><a href="#cb47-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-50"><a href="#cb47-50" aria-hidden="true" tabindex="-1"></a><span class="fu">## Removing Rows</span></span>
<span id="cb47-51"><a href="#cb47-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-52"><a href="#cb47-52" aria-hidden="true" tabindex="-1"></a>The (t, d) deletion data includes tokens in which the previous phoneme is a vowel. Many analyses of (t, d) deletion exclude this context. Here is how to remove these contexts from your data frame.</span>
<span id="cb47-53"><a href="#cb47-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-56"><a href="#cb47-56" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-57"><a href="#cb47-57" aria-hidden="true" tabindex="-1"></a>td <span class="ot">&lt;-</span>td[td<span class="sc">$</span>Before <span class="sc">!=</span> <span class="st">"Vowel"</span>,]</span>
<span id="cb47-58"><a href="#cb47-58" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(td)</span>
<span id="cb47-59"><a href="#cb47-59" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-60"><a href="#cb47-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-61"><a href="#cb47-61" aria-hidden="true" tabindex="-1"></a>The first line of code creates a new object called <span class="in">`td`</span>. The <span class="in">`&lt;-`</span> operator means you're telling *R* that this new <span class="in">`td`</span> is the same as the old <span class="in">`td`</span>, but filtered according to some specific condition. You could also use the <span class="in">`&lt;-`</span> operator to create a new <span class="in">`td`</span> with a different name --- e.g., <span class="in">`td.new &lt;- td[td\$Before != "Vowel",]}`</span> --- thus giving you two data frames (<span class="in">`td`</span> and <span class="in">`td.new`</span>) to work with.</span>
<span id="cb47-62"><a href="#cb47-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-63"><a href="#cb47-63" aria-hidden="true" tabindex="-1"></a>Throughout *R*, square brackets `[ ]` are used for specifying filtering conditions. The first line of code therefore says make new `td` the same as old `td`, but only where the value in the `Before` column of old `td` (indicated by `td$Before`) does not equal `"Vowel"`. `!=` is the standard operator meaning *does not equal*. The comma after `"Vowel"` is important. If you are filtering a data frame, as you are here, *R* needs to know where to look for the values you want to keep or throw out. It follows this format: <span class="in">`data frame[rows,columns]`</span>. So the comma in the above indicates that the filtering condition relates to values found while searching row by row. It selects any row in which the value in the <span class="in">`Before`</span> column does not equal <span class="in">`"Vowel"`</span>. The quotation marks around <span class="in">`"Vowel"`</span> are also important because the values in the <span class="in">`Before`</span> column are all strings of characters, which (you'll remember from above), are always enclosed in quotation marks.</span>
<span id="cb47-64"><a href="#cb47-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-67"><a href="#cb47-67" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-68"><a href="#cb47-68" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Before <span class="ot">&lt;-</span><span class="fu">factor</span>(td<span class="sc">$</span>Before)</span>
<span id="cb47-69"><a href="#cb47-69" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-70"><a href="#cb47-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-71"><a href="#cb47-71" aria-hidden="true" tabindex="-1"></a>An additional line of code is needed for resetting the data structure. The new <span class="in">`td`</span> inherits the data structure from the old <span class="in">`td`</span>. This means *R* thinks the new `td` still has a level in the column `Before` called `"Vowel"` --- even though there are zero tokens now in the column with this value. If you run `summary(td)` after the first code above you'll see that *R* still lists `"Vowel"` as a possible level of `Before`, but with zero instances. The additional line of code tells *R* to make a new column <span class="in">`Before`</span> in the data frame <span class="in">`td`</span> (this will replace the old <span class="in">`Before`</span> column) in which the possible factors (i.e., values) in that column are those that actually exist in the new <span class="in">`Before`</span> column in <span class="in">`td`</span>. Run <span class="in">`summary()`</span> or <span class="in">`str()`</span> now and you'll see that the empty <span class="in">`"Vowel"`</span> level is gone.</span>
<span id="cb47-72"><a href="#cb47-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-75"><a href="#cb47-75" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-76"><a href="#cb47-76" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(td)</span>
<span id="cb47-77"><a href="#cb47-77" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(td)</span>
<span id="cb47-78"><a href="#cb47-78" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-79"><a href="#cb47-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-80"><a href="#cb47-80" aria-hidden="true" tabindex="-1"></a>The following code does exactly the same thing as the previous code, but instead of filtering out <span class="in">`"Vowel"`</span>, it specifies keeping all the other levels. Here <span class="in">`==`</span> is the standard operator meaning *equals and only equals* and `|` (called *pipe* or *bar*) is the operator meaning *or*. Again, note the very important comma following the last column condition.</span>
<span id="cb47-81"><a href="#cb47-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-82"><a href="#cb47-82" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval=FALSE}</span></span>
<span id="cb47-83"><a href="#cb47-83" aria-hidden="true" tabindex="-1"></a>td<span class="ot">&lt;-</span>td[td<span class="sc">$</span>Before <span class="sc">==</span> <span class="st">"Liquid"</span> <span class="sc">|</span> td<span class="sc">$</span>Before <span class="sc">==</span> <span class="st">"Nasal"</span> <span class="sc">|</span> td<span class="sc">$</span>Before <span class="sc">==</span> <span class="st">"Other Fricative"</span> <span class="sc">|</span> td<span class="sc">$</span>Before <span class="sc">==</span> <span class="st">"S"</span> <span class="sc">|</span> td<span class="sc">$</span>Before <span class="sc">==</span> <span class="st">"Stop"</span>,]</span>
<span id="cb47-84"><a href="#cb47-84" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Before <span class="ot">&lt;-</span><span class="fu">factor</span>(td<span class="sc">$</span>Before)</span>
<span id="cb47-85"><a href="#cb47-85" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-86"><a href="#cb47-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-87"><a href="#cb47-87" aria-hidden="true" tabindex="-1"></a>As you did previously, you must run the second line of code to get rid of the empty <span class="in">`"Vowel"`</span> level.</span>
<span id="cb47-88"><a href="#cb47-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-89"><a href="#cb47-89" aria-hidden="true" tabindex="-1"></a><span class="fu">## Re-coding Variables</span></span>
<span id="cb47-90"><a href="#cb47-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-91"><a href="#cb47-91" aria-hidden="true" tabindex="-1"></a>While it is possible to do *ad-hoc* re-codes in *R*, you must keep in mind that these re-codes will only exist in your *R* data frame, not in your saved tab-delimited-text file. Personally, I think it's both easier and more useful to use Microsoft *Excel* to create new columns in your tab-delimited-text file for every re-code or configuration of factors in a factor group (i.e., levels in a column) that you might need. That being said, there are definitely situations where *ad-hoc* re-codes may be preferable.</span>
<span id="cb47-92"><a href="#cb47-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-93"><a href="#cb47-93" aria-hidden="true" tabindex="-1"></a>If you want to change anything in your data frame you can generate an editable data frame in a popup window with the following function:</span>
<span id="cb47-94"><a href="#cb47-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-95"><a href="#cb47-95" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval=FALSE}</span></span>
<span id="cb47-96"><a href="#cb47-96" aria-hidden="true" tabindex="-1"></a><span class="fu">fix</span>(td)</span>
<span id="cb47-97"><a href="#cb47-97" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-98"><a href="#cb47-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-99"><a href="#cb47-99" aria-hidden="true" tabindex="-1"></a>I don't recommend using this method. Like <span class="in">`file.choose()`</span> and <span class="in">`choose.files()`</span>, it introduces non-replicability because the changes you make using <span class="in">`fix()`</span> are not recorded in your script file and therefore cannot be automatically replicated. A better practice for re-coding while maintaining replicability is to specify the cells in a column that include the specific values you want to change, and then to reassign a new value to those cells:</span>
<span id="cb47-100"><a href="#cb47-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-103"><a href="#cb47-103" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-104"><a href="#cb47-104" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>After[td<span class="sc">$</span>After <span class="sc">==</span> <span class="st">"H"</span>]<span class="ot">&lt;-</span><span class="st">"Consonant"</span></span>
<span id="cb47-105"><a href="#cb47-105" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>After <span class="ot">&lt;-</span><span class="fu">factor</span>(td<span class="sc">$</span>After)</span>
<span id="cb47-106"><a href="#cb47-106" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-107"><a href="#cb47-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-108"><a href="#cb47-108" aria-hidden="true" tabindex="-1"></a>The code above uses the <span class="in">`&lt;-`</span> operator to say that any cells in the column <span class="in">`After`</span> that contain the value <span class="in">`"H"`</span> should be changed to <span class="in">`"Consonant"`</span> --- another value in the <span class="in">`After`</span> column. Many studies of (t, d) deletion do not distinguish between pre-/h/ and other pre-consonantal contexts. The above re-code might be needed for comparing this (t, d) deletion data to other studies. Notice that there is no comma following <span class="in">`"H"`</span> in the above code. This is because you are filtering a column; see how the filtering brackets <span class="in">`[ ]`</span> come after the column specifier <span class="in">`$`</span>. The comma is only used when filtering whole data frames because data frames can be filtered along two dimensions (e.g., rows and columns) and *R* needs to know which dimensions the filtering conditions apply to. When you filter just a column (or just a row), you don't need the comma because the filtering only occurs along one dimension (in that column, or in that row only). You also need to run the second <span class="in">`factor()`</span> function to get rid of the now empty <span class="in">`"H"`</span> level.</span>
<span id="cb47-109"><a href="#cb47-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-110"><a href="#cb47-110" aria-hidden="true" tabindex="-1"></a>If you get an error message when trying to re-code using this method and your column contains words (rather than numbers) try first re-classifying (i.e., changing the type of) your original column to a *character* column: <span class="in">`td$After.New &lt;- as.character(td$After.New)`</span>, then proceeding with the above method.</span>
<span id="cb47-111"><a href="#cb47-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-112"><a href="#cb47-112" aria-hidden="true" tabindex="-1"></a>The previous function sequence re-codes all <span class="in">`"H"`</span> cells in the existing <span class="in">`After`</span> column. If instead you wanted to create a new column with your re-code (so both possible coding options were available for later analyses), you could do so by creating a new column with the exact same values as <span class="in">`After`</span> and then re-code that column. If you've been following along in *R*, your <span class="in">`After`</span> column is already re-coded. To go back to the original form of the data as it exists in the tab-delimited-text file, simply reload that text file and assign it to the object <span class="in">`td`</span>. Of course, this resets the deletion of the tokens following a vowel, so you must do that again too. Luckily, you've written all of your functions in a script file (rather than directly into the console) so this is easy to do: just highlight the code and press the execution command.</span>
<span id="cb47-113"><a href="#cb47-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-116"><a href="#cb47-116" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-117"><a href="#cb47-117" aria-hidden="true" tabindex="-1"></a><span class="co"># Start with a fresh import of the (t, d) data into R</span></span>
<span id="cb47-118"><a href="#cb47-118" aria-hidden="true" tabindex="-1"></a>td <span class="ot">&lt;-</span> <span class="fu">read.delim</span>(<span class="st">"Data/deletiondata.txt"</span>)</span>
<span id="cb47-119"><a href="#cb47-119" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert each character column into a factor</span></span>
<span id="cb47-120"><a href="#cb47-120" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Dep.Var <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Dep.Var)</span>
<span id="cb47-121"><a href="#cb47-121" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Stress <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Stress)</span>
<span id="cb47-122"><a href="#cb47-122" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Category <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Category)</span>
<span id="cb47-123"><a href="#cb47-123" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Morph.Type<span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Morph.Type)</span>
<span id="cb47-124"><a href="#cb47-124" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Before <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Before)</span>
<span id="cb47-125"><a href="#cb47-125" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>After <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>After)</span>
<span id="cb47-126"><a href="#cb47-126" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Speaker <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Speaker)</span>
<span id="cb47-127"><a href="#cb47-127" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Sex <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Sex)</span>
<span id="cb47-128"><a href="#cb47-128" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Education <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Education)</span>
<span id="cb47-129"><a href="#cb47-129" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Job <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Job)</span>
<span id="cb47-130"><a href="#cb47-130" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Phoneme.Dep.Var <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Phoneme.Dep.Var)</span>
<span id="cb47-131"><a href="#cb47-131" aria-hidden="true" tabindex="-1"></a><span class="co"># Subset data to remove previous "Vowel" contexts</span></span>
<span id="cb47-132"><a href="#cb47-132" aria-hidden="true" tabindex="-1"></a>td <span class="ot">&lt;-</span>td[td<span class="sc">$</span>Before <span class="sc">!=</span> <span class="st">"Vowel"</span>,]</span>
<span id="cb47-133"><a href="#cb47-133" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Before <span class="ot">&lt;-</span><span class="fu">factor</span>(td<span class="sc">$</span>Before)</span>
<span id="cb47-134"><a href="#cb47-134" aria-hidden="true" tabindex="-1"></a><span class="co">#Re-code "H" to be "Consonant" in a new column</span></span>
<span id="cb47-135"><a href="#cb47-135" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>After.New<span class="ot">&lt;-</span>td<span class="sc">$</span>After</span>
<span id="cb47-136"><a href="#cb47-136" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>After.New[td<span class="sc">$</span>After.New <span class="sc">==</span> <span class="st">"H"</span>]<span class="ot">&lt;-</span><span class="st">"Consonant"</span></span>
<span id="cb47-137"><a href="#cb47-137" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>After.New <span class="ot">&lt;-</span><span class="fu">factor</span>(td<span class="sc">$</span>After.New)</span>
<span id="cb47-138"><a href="#cb47-138" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-139"><a href="#cb47-139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-140"><a href="#cb47-140" aria-hidden="true" tabindex="-1"></a>The new column you create (<span class="in">`After.New`</span>) is added at the end of the data frame. You can conceptualized this as the right edge of the data in an *Excel* spreadsheet. You can see this with the <span class="in">`summary()`</span> or <span class="in">`str()`</span> functions. The name of the new column you create doesn't really matter, but it cannot include any spaces.</span>
<span id="cb47-141"><a href="#cb47-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-144"><a href="#cb47-144" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-145"><a href="#cb47-145" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(td)</span>
<span id="cb47-146"><a href="#cb47-146" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(td)</span>
<span id="cb47-147"><a href="#cb47-147" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-148"><a href="#cb47-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-149"><a href="#cb47-149" aria-hidden="true" tabindex="-1"></a><span class="fu">## Centering Continuous Variables</span></span>
<span id="cb47-150"><a href="#cb47-150" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-151"><a href="#cb47-151" aria-hidden="true" tabindex="-1"></a>Some variables, like year of birth, are not discrete but are continuous. Some statisticians advocate centering continuous variables before including them in certain tests or models. In the Regression Analysis section you'll learn when/if you need to center your variables.</span>
<span id="cb47-152"><a href="#cb47-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-153"><a href="#cb47-153" aria-hidden="true" tabindex="-1"></a>*Centering* entails expressing each value of a continuous variable as that value's difference from the mean of all values of the variable. For example, the *td* data frame has a column for speaker year of birth: <span class="in">`YOB`</span>. The mean of all the years of birth (after the pre-vowel tokens are removed) is <span class="in">`1969`</span>. Centering this variable simply means expressing years of birth like 1952 and 1989, as 17 ($=1969-1952$) and -20 ($=1969-1989$).</span>
<span id="cb47-154"><a href="#cb47-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-157"><a href="#cb47-157" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-158"><a href="#cb47-158" aria-hidden="true" tabindex="-1"></a><span class="co">#Center YOB</span></span>
<span id="cb47-159"><a href="#cb47-159" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Center.Age <span class="ot">&lt;-</span><span class="fu">scale</span>(td<span class="sc">$</span>YOB, <span class="at">scale =</span> <span class="cn">FALSE</span>)</span>
<span id="cb47-160"><a href="#cb47-160" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Center.Age <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(td<span class="sc">$</span>Center.Age)</span>
<span id="cb47-161"><a href="#cb47-161" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-162"><a href="#cb47-162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-163"><a href="#cb47-163" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=FALSE}</span></span>
<span id="cb47-164"><a href="#cb47-164" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Center.Age <span class="ot">&lt;-</span><span class="fu">as.numeric</span>(<span class="fu">scale</span>(td<span class="sc">$</span>YOB, <span class="at">scale =</span> <span class="cn">FALSE</span>))</span>
<span id="cb47-165"><a href="#cb47-165" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-166"><a href="#cb47-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-167"><a href="#cb47-167" aria-hidden="true" tabindex="-1"></a>The <span class="in">`scale()`</span> function centers the values in the column <span class="in">`YOB`</span> and assigns those Centered values to a new column called <span class="in">`Center.Age`</span>. The option <span class="in">`scale = FALSE`</span> indicates that the centered values remain in the original units (in this case years). If you change this option to <span class="in">`scale = TRUE`</span>, the overall mean is subtracted from each value and then each values is divided by the overall standard deviation. This is needed if you are including multiple continuous variables in a model that are expressed using different units and vary along differing scales. When the data is centred and scalled the new values are called **z-scores** or **standardized scores** and you can think of each value as describing the raw value in terms of its distance from the mean when measured in standard deviation units.</span>
<span id="cb47-168"><a href="#cb47-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-169"><a href="#cb47-169" aria-hidden="true" tabindex="-1"></a>For example, imagine a study of variable word-initial voice onset time in which you want to look at the effect of following vowel backness and year of birth of the speaker. Each of these variables are continuous, but voice onset time is $\pm20$ ms around its mean, year of birth is $\pm45$ years around its mean, and F2 is $\pm300$ Hz around its mean. By expressing these values as **z-scores**, you can account for both the differing units and differing scales of each. Even if you have one variable, here just <span class="in">`YOB`</span>, it is okay to scale the values, but do *NOT* do this here. Leave <span class="in">`YOB`</span> in years. This will make the interpretation of later statistical estimates a little easier.</span>
<span id="cb47-170"><a href="#cb47-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-171"><a href="#cb47-171" aria-hidden="true" tabindex="-1"></a>After running your <span class="in">`scale()`</span> function you must also run a function to tell *R* how to treat your new column `Center.Age.` *R* knows the column is filled with numbers, but *R* doesn't know if those numbers are continuous, if they are ordered in a specific way, or if they are factors with names expressed as digits. You use the function `as.numeric()` to tell *R* that the values are continuous numbers. This is very similar to what you did above with the function `factor()`, which tells *R* to consider whatever is inside the function to be a factor. Also, with <span class="in">`After.New`</span> above, where the data structure is inherited from <span class="in">`After`</span>, you used <span class="in">`factor()`</span> to remove the remaining <span class="in">`H`</span> level name. You did this by telling <span class="in">`R`</span> to consider whatever was inside the <span class="in">`factor()`</span> function as a factor, and, as part of that, <span class="in">`R`</span> reads all the levels inside that column and chooses them as the factors. Here you are doing the same thing. You're telling <span class="in">`R`</span> to look at the values inside <span class="in">`Center.Age`</span> and consider them as being continuous numbers. You can do this as a secondary step after you create the column <span class="in">`Center.Age`</span>, as shown in the first two rows. Or you can embed the <span class="in">`scale()`</span> function inside the <span class="in">`as.numeric()`</span> function, <span class="in">`as.numeric(scale())`</span>, as shown in the last line.</span>
<span id="cb47-172"><a href="#cb47-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-173"><a href="#cb47-173" aria-hidden="true" tabindex="-1"></a><span class="fu">## Dividing a Continuous Variable</span></span>
<span id="cb47-174"><a href="#cb47-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-175"><a href="#cb47-175" aria-hidden="true" tabindex="-1"></a>There are other ways you can represent age. Instead of a continuous variable, you can categorize speakers as belonging to a "young", "middle aged", or "old" age group. You might also group speakers based on decade of birth or as being born before or after some event --- whatever makes sense for your study or community.</span>
<span id="cb47-176"><a href="#cb47-176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-177"><a href="#cb47-177" aria-hidden="true" tabindex="-1"></a>How to divide speakers by age is something that should be informed by sociolinguistic theory, demographics, and your own understanding of your data. The birth years 1980 and 1945, used here, represent generational divides in Cape Breton that can be independently justified (Gardner 2013). Grouping speakers like this is very common, and not particularly difficult to do in *R*.</span>
<span id="cb47-178"><a href="#cb47-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-181"><a href="#cb47-181" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-182"><a href="#cb47-182" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a 3-way Age Group</span></span>
<span id="cb47-183"><a href="#cb47-183" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Age.Group[td<span class="sc">$</span>YOB <span class="sc">&gt;</span><span class="dv">1979</span>] <span class="ot">&lt;-</span><span class="st">"Young"</span></span>
<span id="cb47-184"><a href="#cb47-184" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Age.Group[td<span class="sc">$</span>YOB <span class="sc">&gt;</span><span class="dv">1944</span> <span class="sc">&amp;</span> td<span class="sc">$</span>YOB <span class="sc">&lt;</span><span class="dv">1980</span>] <span class="ot">&lt;-</span><span class="st">"Middle"</span></span>
<span id="cb47-185"><a href="#cb47-185" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Age.Group[td<span class="sc">$</span>YOB <span class="sc">&lt;</span><span class="dv">1945</span>] <span class="ot">&lt;-</span><span class="st">"Old"</span></span>
<span id="cb47-186"><a href="#cb47-186" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-187"><a href="#cb47-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-188"><a href="#cb47-188" aria-hidden="true" tabindex="-1"></a>First you will need a new column for your age group variable. Here, call it <span class="in">`Age.Group`</span>.You use the assignment operator <span class="in">`&lt;-`</span> to fill all the cells in the new column <span class="in">`Age.Group`</span> based on the values that are in the already existing <span class="in">`YOB`</span> column. The first line says that for any rows in which <span class="in">`YOB`</span> is greater than 1979, fill the empty cell in those same rows in the column <span class="in">`Age.Group`</span> with the value <span class="in">`Young`</span>. The second line does the same thing but includes two conditions: that <span class="in">`YOB`</span> is greater than 1944 and that it is also less than 1980. For these rows, the value <span class="in">`Middle`</span> is inserted in the <span class="in">`Age.Group`</span> column. Even though the two conditions (<span class="in">`YOB &gt; 1944`</span>, <span class="in">`YOB &lt; 1980`</span>) refer to the same column, you need to fully specify each condition with both a column reference and a condition with an operator. So, for example, writing <span class="in">`td$Age.Group[td$YOB &gt;1944 &amp; &lt;1970]`</span> will not work. The third line instructs <span class="in">`R`</span> to put <span class="in">`Old`</span> in the <span class="in">`Age.Group`</span> column for any row where <span class="in">`YOB`</span> is less than 1945. Because this new column includes words, *R* will automatically categorize the column as <span class="in">`character`</span> data. To rectify this, see the next section.</span>
<span id="cb47-189"><a href="#cb47-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-192"><a href="#cb47-192" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-193"><a href="#cb47-193" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(td<span class="sc">$</span>Age.Group)</span>
<span id="cb47-194"><a href="#cb47-194" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-195"><a href="#cb47-195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-196"><a href="#cb47-196" aria-hidden="true" tabindex="-1"></a><span class="fu">## Changing the Order of Levels</span></span>
<span id="cb47-197"><a href="#cb47-197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-200"><a href="#cb47-200" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-201"><a href="#cb47-201" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Age.Group <span class="ot">&lt;-</span><span class="fu">factor</span>(td<span class="sc">$</span>Age.Group, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Young"</span>, <span class="st">"Middle"</span>, <span class="st">"Old"</span>))</span>
<span id="cb47-202"><a href="#cb47-202" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-203"><a href="#cb47-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-204"><a href="#cb47-204" aria-hidden="true" tabindex="-1"></a>The code above does two things. First, it tells <span class="in">`R`</span> that you want the new <span class="in">`Age.Group`</span> column to be a column of factors, and second, it also tells <span class="in">`R`</span> how you want those factors to be ordered. When <span class="in">`R`</span> extracts the name of the factors of a column (based on the levels that are in that column) it orders the factors by name alphabetically. For example, the <span class="in">`Sex`</span> column contains two levels: <span class="in">`M`</span> and <span class="in">`F`</span>. The first 500 tokens in your data frame might comes from males but <span class="in">`R`</span> will still list the names of the factors in the column (which are based on those two levels) as <span class="in">`F`</span> and then <span class="in">`M`</span>, because <span class="in">`F`</span> is closer to the start of the alphabet than <span class="in">`M`</span>. If you run <span class="in">`summary(td)`</span> you can see that the factor names listed in all of the factor columns are in alphabetical order. Sometimes this alphabetical ordering doesn't matter. Other times it is makes a big difference.</span>
<span id="cb47-205"><a href="#cb47-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-206"><a href="#cb47-206" aria-hidden="true" tabindex="-1"></a>Any time factors are used in a statistical test or appear in a graph, the order of factor names is very important. For example, which factor is selected as the application value and which factor(s) are the non-application value(s) of a dependent variable is determined by factor name order. As for graphs, all kinds of layout parameters are set by the factor order of a variable. For example, if you left the <span class="in">`Age.Group`</span> factor as it is, it would always list the <span class="in">`Age.Group`</span> levels as <span class="in">`Middle`</span>, <span class="in">`Old`</span>, <span class="in">`Young`</span>. On a graph like a bar graph it would arrange the bars for each age group alphabetically from left to right. This is not desirable. You will always want <span class="in">`Age.Group`</span> ordered as either <span class="in">`Young`</span>, <span class="in">`Middle`</span>, <span class="in">`Old`</span> or <span class="in">`Old`</span>, <span class="in">`Middle`</span>, <span class="in">`Young`</span>. This is what the second part of the <span class="in">`factor()`</span> command does. First it tells <span class="in">`R`</span> to consider the values in the <span class="in">`Age.Group`</span> to be factors, then it specifies that you want the factors (which get their names from the levels) to be ordered in certain way. You use <span class="in">`levels =`</span> and the concatenating <span class="in">`c()`</span> function to specify that you want the factors to get their names from the levels in the following order <span class="in">`"Young", "Middle", "Old"`</span>, and thus also be ordered in that way.</span>
<span id="cb47-207"><a href="#cb47-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-208"><a href="#cb47-208" aria-hidden="true" tabindex="-1"></a>This might seem confusing. Think about coins. Imagine you have a bag of change. Each coin in that bag is like a token in your column in the data frame. The levels of the column are just the different kinds of coins there are. You can root around in the bag and figure out what coins are in it without having to put the coins in any particular order. This is the "levels" of the coins. If you ask *R* what coins are in your bag, it will tell you there are "dimes", "nickels", "pennies", and "quarters". These levels are in alphabetical order, but only for a lack of a better way to tell you them. Telling you the levels doesn't imply any sort of ordering of the coins. Making the coin bag into a factor column is like putting the coins into a change tray, like the change trays in cash registers. Coins inside of a change tray go from being unstructured to being organized based on a structure. This makes them factors. In a cash tray each coin is grouped with other coins just like it. Each slot in the drawer also has a name. *R* just automatically gives the slots the same name as the coins (e.g. levels) that are in it. The order of the slots from right to left is also by default alphabetical based on the name of each slot. So, coin (= level), slot name (= factor name) and slot order (= factor order) are three independent parameters. The function <span class="in">`td$Age.Group &lt;-factor(td$Age.Group, levels = c("Young", "Middle", "Old"))`</span> is basically saying take all the coins out of the cash drawer, then put them back in the drawer in in a specific order, with <span class="in">`Young`</span> going in the first slot. The slots then take the names of the coins that go into them.</span>
<span id="cb47-209"><a href="#cb47-209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-210"><a href="#cb47-210" aria-hidden="true" tabindex="-1"></a><span class="fu">## Reversing the Order of Levels</span></span>
<span id="cb47-211"><a href="#cb47-211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-212"><a href="#cb47-212" aria-hidden="true" tabindex="-1"></a>To reverse the order of levels you can embed the <span class="in">`rev()`</span> function inside your <span class="in">`factor()`</span> function</span>
<span id="cb47-213"><a href="#cb47-213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-216"><a href="#cb47-216" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-217"><a href="#cb47-217" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(td<span class="sc">$</span>Age.Group)</span>
<span id="cb47-218"><a href="#cb47-218" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Age.Group <span class="ot">&lt;-</span><span class="fu">factor</span>(td<span class="sc">$</span>Age.Group, <span class="at">levels =</span> <span class="fu">rev</span>(<span class="fu">levels</span>(td<span class="sc">$</span>Age.Group)))</span>
<span id="cb47-219"><a href="#cb47-219" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(td<span class="sc">$</span>Age.Group)</span>
<span id="cb47-220"><a href="#cb47-220" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-221"><a href="#cb47-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-222"><a href="#cb47-222" aria-hidden="true" tabindex="-1"></a><span class="fu">## Combining Columns</span></span>
<span id="cb47-223"><a href="#cb47-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-224"><a href="#cb47-224" aria-hidden="true" tabindex="-1"></a>It is often useful to combine two columns, or factor groups, into one. For example, it might be useful to have a way of grouping tokens not by <span class="in">`Age.Group`</span> or <span class="in">`Sex`</span>, but instead by the combination of <span class="in">`Age.Group`</span> and <span class="in">`Sex`</span>. While it is not difficult to test the potential interaction of these two factor groups in statistical tests in *R*, for specifically generating summary statistics it is much easier to examine the combination of <span class="in">`Age.Group`</span> and <span class="in">`Sex`</span> (or any two columns) by first creating a new column combining them.</span>
<span id="cb47-225"><a href="#cb47-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-226"><a href="#cb47-226" aria-hidden="true" tabindex="-1"></a>Combining columns is done using the function <span class="in">`paste()`</span>, which you embed inside of the <span class="in">`factor()`</span> function so that the resulting column will be a column of factors. Inside <span class="in">`paste()`</span> you list the two columns you want to combine (you could list more) and then tell *R* how to separate the values from each of the columns. Here the code tells *R* to put an underscore <span class="sc">\*\_\*</span> between the values for <span class="in">`Age.Group`</span> and <span class="in">`Sex`</span>, resulting in new values like <span class="in">`Old_M`</span> and <span class="in">`Middle_F`</span>. The new column will be called <span class="in">`Age_Sex`</span>. If we want to order these values in any particular way, we can do that with the <span class="in">`level=`</span> option in <span class="in">`factor()`</span></span>
<span id="cb47-227"><a href="#cb47-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-230"><a href="#cb47-230" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-231"><a href="#cb47-231" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine Columns </span></span>
<span id="cb47-232"><a href="#cb47-232" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Age_Sex <span class="ot">&lt;-</span><span class="fu">factor</span>(<span class="fu">paste</span>(td<span class="sc">$</span>Age.Group, td<span class="sc">$</span>Sex, <span class="at">sep =</span><span class="st">"_"</span>), <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Young_F"</span>, <span class="st">"Middle_F"</span>, <span class="st">"Old_F"</span>, <span class="st">"Young_M"</span>, <span class="st">"Middle_M"</span>, <span class="st">"Old_M"</span>))</span>
<span id="cb47-233"><a href="#cb47-233" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(td<span class="sc">$</span>Age_Sex)</span>
<span id="cb47-234"><a href="#cb47-234" aria-hidden="true" tabindex="-1"></a><span class="co"># Reorder factor levels</span></span>
<span id="cb47-235"><a href="#cb47-235" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Age_Sex <span class="ot">&lt;-</span><span class="fu">factor</span>(td<span class="sc">$</span>Age_Sex, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Young_F"</span>, <span class="st">"Young_M"</span>, <span class="st">"Middle_F"</span>, <span class="st">"Middle_M"</span>, <span class="st">"Old_F"</span>, <span class="st">"Old_M"</span>))</span>
<span id="cb47-236"><a href="#cb47-236" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(td<span class="sc">$</span>Age_Sex)</span>
<span id="cb47-237"><a href="#cb47-237" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-238"><a href="#cb47-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-239"><a href="#cb47-239" aria-hidden="true" tabindex="-1"></a><span class="fu">## Splitting Columns</span></span>
<span id="cb47-240"><a href="#cb47-240" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-241"><a href="#cb47-241" aria-hidden="true" tabindex="-1"></a>You may have noticed that the data frame <span class="in">`td`</span> has one column that is actually two variables. The column <span class="in">`Phoneme.Dep.Var`</span> combines both the underlying phoneme of the token, either <span class="in">`t`</span> (t) or <span class="in">`d`</span> (d), with a more descriptive coding of the dependent variable. In the dialect where this data comes from (t) and (d) can be realized in up to nine different ways, only one of which is <span class="in">`Deletion`</span>. In your analysis you might want to consider if deletion is more likely if the underlying phoneme is (t) or (d). In order to do this you must break <span class="in">`Phoneme`</span> away from the more elaborate <span class="in">`Dep.Var`</span> coding. To do this, you will use a function that is beyond *R*'s base functionality and part of the `dplyr` package. First you load the `dplyr` package from your library using `library()`, then you use the function `mutate()` to tell *R* how to break up the column. The <span class="in">`dplyr`</span> package is very powerful. We will look at additional uses as this guide progresses.</span>
<span id="cb47-242"><a href="#cb47-242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-243"><a href="#cb47-243" aria-hidden="true" tabindex="-1"></a>To be honest, splitting columns is an operation that is much simpler and usually faster to do using *Excel*, or another spreadsheet program. I never use *R* to split columns because, while the `mutate()` function itself is not tricky, figuring out the exact sequence of `regular expressions` I need to split my columns is challenging. If you absolutely must split columns in *R*, below are instructions. Keep in mind that this method will only work for columns with predictable structures, like <span class="in">`Phoneme.Dep.Var`</span>.</span>
<span id="cb47-244"><a href="#cb47-244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-245"><a href="#cb47-245" aria-hidden="true" tabindex="-1"></a>The values in the column <span class="in">`Phoneme.Dep.Var`</span> are predictable, in other words, they all follow the same pattern. You can exploit this regularity to tell *R* exactly where to break the <span class="in">`Phoneme.Dep.Var`</span> values into two. If you execute the command <span class="in">`levels(td$Phoneme.Dep.Var)`</span> you can very easily see the pattern.</span>
<span id="cb47-246"><a href="#cb47-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-249"><a href="#cb47-249" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-250"><a href="#cb47-250" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(td<span class="sc">$</span>Phoneme.Dep.Var)</span>
<span id="cb47-251"><a href="#cb47-251" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-252"><a href="#cb47-252" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-253"><a href="#cb47-253" aria-hidden="true" tabindex="-1"></a>The first part of every value is either <span class="in">`t`</span> or <span class="in">`d`</span>, then there are two hyphens, then a word describing the realization of (t) or (d). If you split <span class="in">`Phoneme.Dep.Var`</span> at the hyphens you'll be left with two values: one that is either <span class="in">`t`</span> or <span class="in">`d`</span>, and another that describes the realization of (t) or (d). So, for the new <span class="in">`Phoneme`</span> column you want the one character before the hyphens from <span class="in">`Phoneme.Dep.Var`</span>, and for the new <span class="in">`Dep.Var.Full`</span> column, you want all the characters --- however many there are -- that come after the two hyphens.</span>
<span id="cb47-254"><a href="#cb47-254" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-255"><a href="#cb47-255" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, message = FALSE}</span></span>
<span id="cb47-256"><a href="#cb47-256" aria-hidden="true" tabindex="-1"></a><span class="co"># Break Phoneme.Dep.Var into two columns</span></span>
<span id="cb47-257"><a href="#cb47-257" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb47-258"><a href="#cb47-258" aria-hidden="true" tabindex="-1"></a>td <span class="ot">&lt;-</span><span class="fu">mutate</span>(td, <span class="at">Phoneme =</span> <span class="fu">sub</span>(<span class="st">"^(.)(--.*)$"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">1"</span>, Phoneme.Dep.Var), <span class="at">Dep.Var.Full =</span> <span class="fu">sub</span>(<span class="st">"^(.--)(.*)$"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">2"</span>, Phoneme.Dep.Var), <span class="at">Phoneme.Dep.Var =</span> <span class="cn">NULL</span>)</span>
<span id="cb47-259"><a href="#cb47-259" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Dep.Var.Full <span class="ot">&lt;-</span><span class="fu">factor</span>(td<span class="sc">$</span>Dep.Var.Full)</span>
<span id="cb47-260"><a href="#cb47-260" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Phoneme <span class="ot">&lt;-</span><span class="fu">factor</span>(td<span class="sc">$</span>Phoneme)</span>
<span id="cb47-261"><a href="#cb47-261" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-262"><a href="#cb47-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-263"><a href="#cb47-263" aria-hidden="true" tabindex="-1"></a>::: callout-note</span>
<span id="cb47-264"><a href="#cb47-264" aria-hidden="true" tabindex="-1"></a>The procedure here is somewhat complicated. I always have to double-check how these complicated procedures work. Either by looking up the functions or checking my old script files. You can look up how a function like <span class="in">`mutate()`</span> works by placing a question mark before the function in the console window, e.g. \texttt{?mutate()}.</span>
<span id="cb47-265"><a href="#cb47-265" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb47-266"><a href="#cb47-266" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-267"><a href="#cb47-267" aria-hidden="true" tabindex="-1"></a>Above, inside the <span class="in">`mutate()`</span> function, first you specify the data frame object you want to mutate (here <span class="in">`td`</span>), and then how to mutate it. The mutations include creating a new column called <span class="in">`Phoneme`</span> and then telling *R* what do put in it, creating a new column called `Dep.Var.Full` and then telling *R* what to put in it, and then taking the `Phoneme.Dep.Var` column and making it equal `NULL` --- in other words, deleting it. For the `Phoneme` and `Dep.Var.Full` columns you specify what values to insert in each cell using the `sub()` function, which returns a "sub" or divided section of a value within some cell. The `sub()` function's first argument is a pattern of *regular expressions* to search for, the second is a character string to replace the pattern with, and the third is the column in which to search for the pattern.</span>
<span id="cb47-268"><a href="#cb47-268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-269"><a href="#cb47-269" aria-hidden="true" tabindex="-1"></a>::: callout-note</span>
<span id="cb47-270"><a href="#cb47-270" aria-hidden="true" tabindex="-1"></a>I don't have *R*'s regular expressions memorized; I always have to look them up <span class="co">[</span><span class="ot">here</span><span class="co">](https://stat.ethz.ch/R-manual/R-devel/library/base/html/regex.html)</span>.</span>
<span id="cb47-271"><a href="#cb47-271" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb47-272"><a href="#cb47-272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-273"><a href="#cb47-273" aria-hidden="true" tabindex="-1"></a>For the \texttt{sub()} functions meant to create values for <span class="in">`Phoneme`</span> and for <span class="in">`Dep.Var.Full`</span> you tell *R* to search `Phoneme.Dep.Var` for the pattern `"^.--.*$"`. This series of regular expressions describes the following pattern: a text string beginning with one single character, followed by two hyphens, and then any number of characters. The quotation marks `" "` indicate a text string. The `^` and `$` indicate the beginning and end of a text string, respectively.[^1] The period `.` indicates a single character and the asterisk`*` indicates zero or more of whatever comes before that asterisk. So `.*` means any one or more characters. The two hyphens `--` are just two hyphens. The parentheses in the regular expressions relate to the second substitution element. In the `sub()` function responsible for creating values for the new `Phoneme` column, you break the values that match the regular expression pattern into two parts: the one character before the two hyphens `(.)` and then everything after it `(--.*)`; then you tell *R* to substitute (or rather place) the first of those two elements `\\1` as text `" "` in the new column. In the `sub()` function responsible for creating the values for the new `Dep.Var.Full` column, you break the values that match the regular expression pattern into two parts: the two hyphens and the one character that comes before them `(.--)` and then the one or more characters that come after the hyphens `(.*)`; then tell *R* to to substitute (or rather place) the second of those elements <span class="in">`\\2`</span> as text <span class="in">`" "`</span> in the new column.</span>
<span id="cb47-274"><a href="#cb47-274" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-275"><a href="#cb47-275" aria-hidden="true" tabindex="-1"></a><span class="ot">[^1]: </span>You use <span class="in">`$`</span> in other places for specifying columns within data frames, but here it's inside quotation marks and serving a different function.</span>
<span id="cb47-276"><a href="#cb47-276" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-277"><a href="#cb47-277" aria-hidden="true" tabindex="-1"></a>The last two lines simply make these two new columns into factor columns.</span>
<span id="cb47-278"><a href="#cb47-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-279"><a href="#cb47-279" aria-hidden="true" tabindex="-1"></a><span class="fu">## Partitioning Data Frames</span></span>
<span id="cb47-280"><a href="#cb47-280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-281"><a href="#cb47-281" aria-hidden="true" tabindex="-1"></a>Many times in my own work I have only wanted to work in *R* with a subset of my full dataset. For example, I frequently want to run separate regression analyses on data from old speakers, middle age speakers, and young speakers. Other times I've had large datasets that combine multiple corpora and have wanted to run tests on data from just one corpus. Being able to partition (subset) my data frame has therefore been very useful.</span>
<span id="cb47-282"><a href="#cb47-282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-283"><a href="#cb47-283" aria-hidden="true" tabindex="-1"></a>There are two main ways to partition your data. One method involves using the filtering functionality of *R* detailed above. For example, the first line code below represents the <span class="in">`td`</span> data from <span class="in">`young`</span> speakers only. The second line of codes assigns that subset of <span class="in">`td`</span> to a completely new data frame.</span>
<span id="cb47-284"><a href="#cb47-284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-285"><a href="#cb47-285" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval=FALSE}</span></span>
<span id="cb47-286"><a href="#cb47-286" aria-hidden="true" tabindex="-1"></a><span class="co"># Subset of td where  Age.Group only equals Young </span></span>
<span id="cb47-287"><a href="#cb47-287" aria-hidden="true" tabindex="-1"></a>td[td<span class="sc">$</span>Age.Group <span class="sc">==</span> <span class="st">"Young"</span>,]</span>
<span id="cb47-288"><a href="#cb47-288" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-289"><a href="#cb47-289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-292"><a href="#cb47-292" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-293"><a href="#cb47-293" aria-hidden="true" tabindex="-1"></a><span class="co"># Create td.young which equals subset of td where Age. Group only equals Young</span></span>
<span id="cb47-294"><a href="#cb47-294" aria-hidden="true" tabindex="-1"></a>td.young <span class="ot">&lt;-</span> td[td<span class="sc">$</span>Age.Group <span class="sc">==</span> <span class="st">"Young"</span>,]</span>
<span id="cb47-295"><a href="#cb47-295" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-296"><a href="#cb47-296" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-297"><a href="#cb47-297" aria-hidden="true" tabindex="-1"></a>In your tests you can use the filtered version of <span class="in">`td`</span> or you can use the new data frame <span class="in">`td.young`</span>. I recommend using the new data frame if you are using any centered continuous variables. This is because centered continuous variables are centered around the mean of the values in the column that is centered. If you partition the data, that mean will be different because the range of values within the the centered column are now different. So, if you partition your data, especially by age, you should re-center your continuous variables.</span>
<span id="cb47-298"><a href="#cb47-298" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-299"><a href="#cb47-299" aria-hidden="true" tabindex="-1"></a>The second way to partition your data is using the <span class="in">`subset()`</span> function.</span>
<span id="cb47-300"><a href="#cb47-300" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-303"><a href="#cb47-303" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-304"><a href="#cb47-304" aria-hidden="true" tabindex="-1"></a><span class="co"># Create three partitions based on Age.Group</span></span>
<span id="cb47-305"><a href="#cb47-305" aria-hidden="true" tabindex="-1"></a>td.young <span class="ot">&lt;-</span><span class="fu">subset</span>(td, Age.Group <span class="sc">==</span> <span class="st">"Young"</span>)</span>
<span id="cb47-306"><a href="#cb47-306" aria-hidden="true" tabindex="-1"></a>td.middle <span class="ot">&lt;-</span><span class="fu">subset</span>(td, Age.Group <span class="sc">==</span> <span class="st">"Middle"</span>)</span>
<span id="cb47-307"><a href="#cb47-307" aria-hidden="true" tabindex="-1"></a>td.old <span class="ot">&lt;-</span><span class="fu">subset</span>(td, Age.Group <span class="sc">==</span> <span class="st">"Old"</span>)</span>
<span id="cb47-308"><a href="#cb47-308" aria-hidden="true" tabindex="-1"></a><span class="co"># Re-Center Center.Age</span></span>
<span id="cb47-309"><a href="#cb47-309" aria-hidden="true" tabindex="-1"></a>td.young<span class="sc">$</span>Center.Age <span class="ot">&lt;-</span> <span class="fu">scale</span>(td.young<span class="sc">$</span>YOB, <span class="at">scale =</span> <span class="cn">FALSE</span>)</span>
<span id="cb47-310"><a href="#cb47-310" aria-hidden="true" tabindex="-1"></a>td.middle<span class="sc">$</span>Center.Age <span class="ot">&lt;-</span> <span class="fu">scale</span>(td.middle<span class="sc">$</span>YOB, <span class="at">scale =</span> <span class="cn">FALSE</span>)</span>
<span id="cb47-311"><a href="#cb47-311" aria-hidden="true" tabindex="-1"></a>td.old<span class="sc">$</span>Center.Age <span class="ot">&lt;-</span> <span class="fu">scale</span>(td.old<span class="sc">$</span>YOB, <span class="at">scale =</span> <span class="cn">FALSE</span>)</span>
<span id="cb47-312"><a href="#cb47-312" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-313"><a href="#cb47-313" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-314"><a href="#cb47-314" aria-hidden="true" tabindex="-1"></a>The usefulness of <span class="in">`subset()`</span> is when you want to partition your data frame based on several factors. For example, compare the filtering versus <span class="in">`subset()`</span> methods when partitioning <span class="in">`td`</span> for just middle-age, blue-collar men. Using \texttt{subset()} saves you from having to type <span class="in">`td$`</span> multiple times, and you don't need the final <span class="in">`,`</span>. Below <span class="in">`&amp;`</span> is the standard operator meaning "and".</span>
<span id="cb47-315"><a href="#cb47-315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-318"><a href="#cb47-318" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-319"><a href="#cb47-319" aria-hidden="true" tabindex="-1"></a><span class="co"># Subset of td where Age.Group is Middle, Sex is M, and Job is Blue</span></span>
<span id="cb47-320"><a href="#cb47-320" aria-hidden="true" tabindex="-1"></a>td.midmenblue  <span class="ot">&lt;-</span> td[td<span class="sc">$</span>Age.Group <span class="sc">==</span> <span class="st">"Middle"</span> <span class="sc">&amp;</span> td<span class="sc">$</span>Sex <span class="sc">==</span> <span class="st">"M"</span> <span class="sc">&amp;</span> td<span class="sc">$</span>Job <span class="sc">==</span> <span class="st">"Blue"</span>,]</span>
<span id="cb47-321"><a href="#cb47-321" aria-hidden="true" tabindex="-1"></a><span class="co"># Subset of td where Age.Group is Middle, Sex is M, and Job is Blue</span></span>
<span id="cb47-322"><a href="#cb47-322" aria-hidden="true" tabindex="-1"></a>td.midmenblue <span class="ot">&lt;-</span><span class="fu">subset</span>(td, Age.Group <span class="sc">==</span> <span class="st">"Middle"</span> <span class="sc">&amp;</span> Sex <span class="sc">==</span> <span class="st">"M"</span> <span class="sc">&amp;</span> Job <span class="sc">==</span> <span class="st">"Blue"</span>) </span>
<span id="cb47-323"><a href="#cb47-323" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-324"><a href="#cb47-324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-325"><a href="#cb47-325" aria-hidden="true" tabindex="-1"></a>When you subset your data frame, using either method, and assign it to a new data frame, your new data frame inherits the structure of your old data frame. This means that there will be lots of columns that list empty levels. If you execute <span class="in">`summary(td.midmenblue)}`</span> you'll see see that <span class="in">`Job`</span> still lists <span class="in">`Service`</span>, <span class="in">`Student`</span>, and <span class="in">`White`</span> as factors with 0 tokens each. To remove these empty levels you could use the <span class="in">`factor()`</span> function on each column with empty levels (as you did above), or you can use the function <span class="in">`droplevels()`</span> to tell *R* to drop any empty levels from each column in the data frame. You need to make sure to also assign the dropped levels data frame to the original data frame, as shown below.</span>
<span id="cb47-326"><a href="#cb47-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-329"><a href="#cb47-329" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-330"><a href="#cb47-330" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(td.midmenblue)</span>
<span id="cb47-331"><a href="#cb47-331" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop empty levels across dataset</span></span>
<span id="cb47-332"><a href="#cb47-332" aria-hidden="true" tabindex="-1"></a>td.midmenblue <span class="ot">&lt;-</span> <span class="fu">droplevels</span>(td.midmenblue)</span>
<span id="cb47-333"><a href="#cb47-333" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(td.midmenblue)</span>
<span id="cb47-334"><a href="#cb47-334" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-335"><a href="#cb47-335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-336"><a href="#cb47-336" aria-hidden="true" tabindex="-1"></a><span class="fu">## Interim Summary</span></span>
<span id="cb47-337"><a href="#cb47-337" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-338"><a href="#cb47-338" aria-hidden="true" tabindex="-1"></a>Below is the full code for loading the data file and then re-coding it. As you progress through the next sections, if for any reason you have a problem, it may be useful to recreate the *R* object <span class="in">`td`</span> from scratch. Going forward in these instructions, the <span class="in">`td`</span> object will be the object as it exists at the end of this code.</span>
<span id="cb47-339"><a href="#cb47-339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-342"><a href="#cb47-342" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-343"><a href="#cb47-343" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb47-344"><a href="#cb47-344" aria-hidden="true" tabindex="-1"></a>td <span class="ot">&lt;-</span><span class="fu">read.delim</span>(<span class="st">"https://www.dropbox.com/s/jxlfuogea3lx2pu/deletiondata.txt?dl=1"</span>)</span>
<span id="cb47-345"><a href="#cb47-345" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-346"><a href="#cb47-346" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-347"><a href="#cb47-347" aria-hidden="true" tabindex="-1"></a>Or...</span>
<span id="cb47-348"><a href="#cb47-348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-349"><a href="#cb47-349" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval=TRUE}</span></span>
<span id="cb47-350"><a href="#cb47-350" aria-hidden="true" tabindex="-1"></a>td <span class="ot">&lt;-</span> <span class="fu">read.delim</span>(<span class="st">"Data/deletiondata.txt"</span>)</span>
<span id="cb47-351"><a href="#cb47-351" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-352"><a href="#cb47-352" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-353"><a href="#cb47-353" aria-hidden="true" tabindex="-1"></a>Then...</span>
<span id="cb47-354"><a href="#cb47-354" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-357"><a href="#cb47-357" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-358"><a href="#cb47-358" aria-hidden="true" tabindex="-1"></a><span class="co"># Subset data to remove previous "Vowel" contexts</span></span>
<span id="cb47-359"><a href="#cb47-359" aria-hidden="true" tabindex="-1"></a>td <span class="ot">&lt;-</span> td[td<span class="sc">$</span>Before <span class="sc">!=</span> <span class="st">"Vowel"</span>,]</span>
<span id="cb47-360"><a href="#cb47-360" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Before <span class="ot">&lt;-</span><span class="fu">factor</span>(td<span class="sc">$</span>Before)</span>
<span id="cb47-361"><a href="#cb47-361" aria-hidden="true" tabindex="-1"></a><span class="co"># Re-code "H" to be "Consonant" in a new column</span></span>
<span id="cb47-362"><a href="#cb47-362" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>After.New <span class="ot">&lt;-</span> td<span class="sc">$</span>After</span>
<span id="cb47-363"><a href="#cb47-363" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>After.New[td<span class="sc">$</span>After.New <span class="sc">==</span> <span class="st">"H"</span>] <span class="ot">&lt;-</span> <span class="st">"Consonant"</span></span>
<span id="cb47-364"><a href="#cb47-364" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>After.New <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>After.New)</span>
<span id="cb47-365"><a href="#cb47-365" aria-hidden="true" tabindex="-1"></a><span class="co"># Center Year of Birth</span></span>
<span id="cb47-366"><a href="#cb47-366" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Center.Age <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">scale</span>(td<span class="sc">$</span>YOB, <span class="at">scale =</span> <span class="cn">FALSE</span>))</span>
<span id="cb47-367"><a href="#cb47-367" aria-hidden="true" tabindex="-1"></a><span class="co"># Create Age.Group</span></span>
<span id="cb47-368"><a href="#cb47-368" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Age.Group[td<span class="sc">$</span>YOB <span class="sc">&gt;</span><span class="dv">1979</span>] <span class="ot">&lt;-</span> <span class="st">"Young"</span></span>
<span id="cb47-369"><a href="#cb47-369" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Age.Group[td<span class="sc">$</span>YOB <span class="sc">&gt;</span><span class="dv">1944</span> <span class="sc">&amp;</span> td<span class="sc">$</span>YOB <span class="sc">&lt;</span><span class="dv">1980</span>] <span class="ot">&lt;-</span> <span class="st">"Middle"</span></span>
<span id="cb47-370"><a href="#cb47-370" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Age.Group[td<span class="sc">$</span>YOB <span class="sc">&lt;</span><span class="dv">1945</span>] <span class="ot">&lt;-</span> <span class="st">"Old"</span></span>
<span id="cb47-371"><a href="#cb47-371" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Age.Group <span class="ot">&lt;-</span><span class="fu">factor</span>(td<span class="sc">$</span>Age.Group, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Young"</span>, <span class="st">"Middle"</span>, <span class="st">"Old"</span>))</span>
<span id="cb47-372"><a href="#cb47-372" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine Age and Sex</span></span>
<span id="cb47-373"><a href="#cb47-373" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Age_Sex <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">paste</span>(td<span class="sc">$</span>Age.Group, td<span class="sc">$</span>Sex, <span class="at">sep =</span><span class="st">"_"</span>))</span>
<span id="cb47-374"><a href="#cb47-374" aria-hidden="true" tabindex="-1"></a><span class="co"># Break Phoneme.Dep.Var into two columns</span></span>
<span id="cb47-375"><a href="#cb47-375" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb47-376"><a href="#cb47-376" aria-hidden="true" tabindex="-1"></a>td <span class="ot">&lt;-</span> <span class="fu">mutate</span>(td, <span class="at">Phoneme =</span> <span class="fu">sub</span>(<span class="st">"^(.)(--.*)$"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">1"</span>, Phoneme.Dep.Var), <span class="at">Dep.Var.Full =</span> <span class="fu">sub</span>(<span class="st">"^(.--)(.*)$"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">2"</span>, Phoneme.Dep.Var), <span class="at">Phoneme.Dep.Var =</span> <span class="cn">NULL</span>)</span>
<span id="cb47-377"><a href="#cb47-377" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Phoneme <span class="ot">&lt;-</span><span class="fu">factor</span>(td<span class="sc">$</span>Phoneme)</span>
<span id="cb47-378"><a href="#cb47-378" aria-hidden="true" tabindex="-1"></a>td<span class="sc">$</span>Dep.Var.Full <span class="ot">&lt;-</span> <span class="fu">factor</span>(td<span class="sc">$</span>Dep.Var.Full)  </span>
<span id="cb47-379"><a href="#cb47-379" aria-hidden="true" tabindex="-1"></a><span class="co"># Create three partitions based on Age.Group</span></span>
<span id="cb47-380"><a href="#cb47-380" aria-hidden="true" tabindex="-1"></a>td.young <span class="ot">&lt;-</span> <span class="fu">droplevels</span>(<span class="fu">subset</span>(td, Age.Group <span class="sc">==</span> <span class="st">"Young"</span>))</span>
<span id="cb47-381"><a href="#cb47-381" aria-hidden="true" tabindex="-1"></a>td.middle <span class="ot">&lt;-</span> <span class="fu">droplevels</span>(<span class="fu">subset</span>(td, Age.Group <span class="sc">==</span> <span class="st">"Middle"</span>))</span>
<span id="cb47-382"><a href="#cb47-382" aria-hidden="true" tabindex="-1"></a>td.old <span class="ot">&lt;-</span> <span class="fu">droplevels</span>(<span class="fu">subset</span>(td, Age.Group <span class="sc">==</span> <span class="st">"Old"</span>))</span>
<span id="cb47-383"><a href="#cb47-383" aria-hidden="true" tabindex="-1"></a><span class="co"># Re-center Center.Age</span></span>
<span id="cb47-384"><a href="#cb47-384" aria-hidden="true" tabindex="-1"></a>td.young<span class="sc">$</span>Center.Age <span class="ot">&lt;-</span> <span class="fu">scale</span>(td.young<span class="sc">$</span>YOB, <span class="at">scale =</span> <span class="cn">FALSE</span>)</span>
<span id="cb47-385"><a href="#cb47-385" aria-hidden="true" tabindex="-1"></a>td.middle<span class="sc">$</span>Center.Age <span class="ot">&lt;-</span> <span class="fu">scale</span>(td.middle<span class="sc">$</span>YOB, <span class="at">scale =</span> <span class="cn">FALSE</span>)</span>
<span id="cb47-386"><a href="#cb47-386" aria-hidden="true" tabindex="-1"></a>td.old<span class="sc">$</span>Center.Age <span class="ot">&lt;-</span> <span class="fu">scale</span>(td.old<span class="sc">$</span>YOB, <span class="at">scale =</span> <span class="cn">FALSE</span>)</span>
<span id="cb47-387"><a href="#cb47-387" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center"><div class="cookie-consent-footer"><a href="#" id="open_preferences_center">Cookie Preferences</a></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>



<script src="../../../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>